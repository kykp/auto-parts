import{j as t,c as b,b as g,u as k,d as E,r as S,m as f,l as h,F as m,B as j}from"./index-DKPzYSGX.js";const V="_x_1e03h_44",y={x:V,"theme-filled":"_theme-filled_1e03h_59"},w=c=>{const{className:n,onClick:s,theme:a="main",style:l}=c;return t.jsx("button",{style:l,type:"button",onClick:s,className:b(y.x,{[y[`theme-${a}`]]:a},n),children:t.jsx(g,{width:20,height:20})})},F=c=>c.reduce((n,s)=>{if(s.elementType==="date")return s.fields.forEach(l=>n[l.name]=l.defaultValue),n;if(s.elementType==="time")return s.fields.forEach(l=>{var r;return n[l.name]=l.defaultValue?(r=l.defaultValue)==null?void 0:r.replace("-",":"):null}),n;const a=s.defaultValue;if(s.elementType==="select"){const l=s.options.find(r=>r.value===a);return n[s.name]=a?l:null,n}return s.elementType==="checkBox"||s.elementType==="switcher"?(n[s.name]=!!a,n):(n[s.name]=a||"",n)},{}),O=c=>Object.entries(c).reduce((n,[s,a])=>(n[s]=a||null,n),{}),B="_FilterOverlay_lbsp8_44",I="_Filter_lbsp8_44",D="_header_lbsp8_69",P="_title_lbsp8_75",X="_body_lbsp8_80",$="_label_lbsp8_88",R="_buttons_lbsp8_92",H="_field_lbsp8_98",q="_container_lbsp8_105",i={FilterOverlay:B,Filter:I,header:D,title:P,body:X,label:$,buttons:R,field:H,container:q},G=c=>{const{isShowClose:n=!0,className:s,onClose:a,config:l=[]}=c,{control:r,handleSubmit:N,reset:x}=k({defaultValues:F(l)}),[z,_]=E(),v=e=>{const d=O(e),p=Object.entries(d).reduce((o,[C,u])=>(o[C]=typeof u=="object"&&u!==null?u.value:u,o),{});_(o=>({...o,page:1,...p})),a(),x()},T=async()=>{_(()=>({page:1})),a()};return S.useEffect(()=>{x(F(l))},[l]),t.jsxs(t.Fragment,{children:[t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},className:b(i.FilterOverlay),onClick:a}),t.jsxs(f.form,{animate:{transform:"translateX(-320px)"},exit:{transform:"translateX(0)"},transition:{duration:.3},className:b(i.Filter,s),onSubmit:N(v),children:[t.jsxs("div",{className:i.header,onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{className:i.title,children:h.title.filter}),n&&t.jsx(w,{onClick:a})]}),t.jsx("div",{className:i.body,children:l.map((e,d)=>t.jsxs("div",{children:[e.groupName&&t.jsx("div",{className:i.label,children:e.groupName}),e.elementType==="input"&&t.jsx(m.Input,{control:r,name:e.name,placeholder:e.placeholder,label:e.label}),e.elementType==="checkBox"&&t.jsx(m.Checkbox,{control:r,name:e.name,label:e.label}),e.elementType==="select"&&t.jsx(m.Select,{control:r,name:e.name,options:e.options,placeholder:e.placeholder,label:e.label}),e.elementType==="switcher"&&t.jsx(m.Switch,{control:r,name:e.name,label:e.label}),e.elementType==="date"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((p,o)=>t.jsx(m.Input,{control:r,type:"date",name:p.name},o))},d)]}),e.elementType==="time"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((p,o)=>t.jsx(m.Input,{control:r,type:"time",name:p.name},o))},d)]})]},d))}),t.jsxs("div",{className:i.buttons,children:[t.jsx(j,{type:"submit",children:h.btn.acceptFilters}),t.jsx(j,{type:"button",theme:"white",onClick:T,children:h.btn.clearFilters})]})]})]})};export{G as default};
