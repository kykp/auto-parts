import{D as g,r as k,j as t,n as f,e as j}from"./vendor-D5vbP1IM.js";import{u as C,l as h,X as E,F as c,B as y}from"./index-BNS2Yrq9.js";const _=m=>m.reduce((a,n)=>{if(n.elementType==="date")return n.fields.forEach(l=>a[l.name]=l.defaultValue),a;if(n.elementType==="time")return n.fields.forEach(l=>{var r;return a[l.name]=l.defaultValue?(r=l.defaultValue)==null?void 0:r.replace("-",":"):null}),a;const s=n.defaultValue;if(n.elementType==="select"){const l=n.options.find(r=>r.value===s);return a[n.name]=s?l:null,a}return n.elementType==="checkBox"||n.elementType==="switcher"?(a[n.name]=!!s,a):(a[n.name]=s||"",a)},{}),S=m=>Object.entries(m).reduce((a,[n,s])=>(a[n]=s||null,a),{}),V="_FilterOverlay_16li8_44",O="_Filter_16li8_44",w="_header_16li8_69",B="_title_16li8_75",D="_body_16li8_80",X="_label_16li8_88",I="_buttons_16li8_92",P="_field_16li8_98",R="_container_16li8_105",i={FilterOverlay:V,Filter:O,header:w,title:B,body:D,label:X,buttons:I,field:P,container:R},z=m=>{const{isShowClose:a=!0,className:n,onClose:s,config:l=[]}=m,{control:r,handleSubmit:F,reset:b}=g({defaultValues:_(l)}),[H,x]=C(),N=e=>{const d=S(e),u=Object.entries(d).reduce((o,[T,p])=>(o[T]=typeof p=="object"&&p!==null?p.value:p,o),{});x(o=>({...o,page:1,...u})),s(),b()},v=async()=>{x(()=>({page:1})),s()};return k.useEffect(()=>{b(_(l))},[l]),t.jsxs(t.Fragment,{children:[t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},className:j(i.FilterOverlay),onClick:s}),t.jsxs(f.form,{animate:{transform:"translateX(-320px)"},exit:{transform:"translateX(0)"},transition:{duration:.3},className:j(i.Filter,n),onSubmit:F(N),children:[t.jsxs("div",{className:i.header,onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{className:i.title,children:h.title.filter}),a&&t.jsx(E,{onClick:s})]}),t.jsx("div",{className:i.body,children:l.map((e,d)=>t.jsxs("div",{children:[e.groupName&&t.jsx("div",{className:i.label,children:e.groupName}),e.elementType==="input"&&t.jsx(c.Input,{control:r,name:e.name,placeholder:e.placeholder,label:e.label}),e.elementType==="checkBox"&&t.jsx(c.Checkbox,{control:r,name:e.name,label:e.label}),e.elementType==="select"&&t.jsx(c.Select,{control:r,name:e.name,options:e.options,placeholder:e.placeholder,label:e.label}),e.elementType==="switcher"&&t.jsx(c.Switch,{control:r,name:e.name,label:e.label}),e.elementType==="date"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((u,o)=>t.jsx(c.Input,{control:r,type:"date",name:u.name},o))},d)]}),e.elementType==="time"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((u,o)=>t.jsx(c.Input,{control:r,type:"time",name:u.name},o))},d)]})]},d))}),t.jsxs("div",{className:i.buttons,children:[t.jsx(y,{type:"submit",children:h.btn.acceptFilters}),t.jsx(y,{type:"button",theme:"white",onClick:v,children:h.btn.clearFilters})]})]})]})};export{z as default};
