import{D as z,r as g,j as t,n as f,e as j}from"./vendor-D5vbP1IM.js";import{u as k,l as h,X as C,F as c,B as y}from"./index-BdtEMOJ6.js";const _=m=>m.reduce((a,n)=>{if(n.elementType==="date")return n.fields.forEach(l=>a[l.name]=l.defaultValue),a;if(n.elementType==="time")return n.fields.forEach(l=>{var r;return a[l.name]=l.defaultValue?(r=l.defaultValue)==null?void 0:r.replace("-",":"):null}),a;const s=n.defaultValue;if(n.elementType==="select"){const l=n.options.find(r=>r.value===s);return a[n.name]=s?l:null,a}return n.elementType==="checkBox"||n.elementType==="switcher"?(a[n.name]=!!s,a):(a[n.name]=s||"",a)},{}),E=m=>Object.entries(m).reduce((a,[n,s])=>(a[n]=s||null,a),{}),S="_FilterOverlay_l08zr_44",V="_Filter_l08zr_44",O="_header_l08zr_69",w="_title_l08zr_75",B="_body_l08zr_80",D="_label_l08zr_88",X="_buttons_l08zr_92",I="_field_l08zr_98",P="_container_l08zr_105",i={FilterOverlay:S,Filter:V,header:O,title:w,body:B,label:D,buttons:X,field:I,container:P},q=m=>{const{isShowClose:a=!0,className:n,onClose:s,config:l=[]}=m,{control:r,handleSubmit:F,reset:b}=z({defaultValues:_(l)}),[R,x]=k(),N=e=>{const d=E(e),u=Object.entries(d).reduce((o,[T,p])=>(o[T]=typeof p=="object"&&p!==null?p.value:p,o),{});x(o=>({...o,page:1,...u})),s(),b()},v=async()=>{x(()=>({page:1})),s()};return g.useEffect(()=>{b(_(l))},[l]),t.jsxs(t.Fragment,{children:[t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},className:j(i.FilterOverlay),onClick:s}),t.jsxs(f.form,{animate:{transform:"translateX(-320px)"},exit:{transform:"translateX(0)"},transition:{duration:.3},className:j(i.Filter,n),onSubmit:F(N),children:[t.jsxs("div",{className:i.header,onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{className:i.title,children:h.title.filter}),a&&t.jsx(C,{onClick:s})]}),t.jsx("div",{className:i.body,children:l.map((e,d)=>t.jsxs("div",{children:[e.groupName&&t.jsx("div",{className:i.label,children:e.groupName}),e.elementType==="input"&&t.jsx(c.Input,{control:r,name:e.name,placeholder:e.placeholder,label:e.label}),e.elementType==="checkBox"&&t.jsx(c.Checkbox,{control:r,name:e.name,label:e.label}),e.elementType==="select"&&t.jsx(c.Select,{control:r,name:e.name,options:e.options,placeholder:e.placeholder,label:e.label}),e.elementType==="switcher"&&t.jsx(c.Switch,{control:r,name:e.name,label:e.label}),e.elementType==="date"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((u,o)=>t.jsx(c.Input,{control:r,type:"date",name:u.name},o))},d)]}),e.elementType==="time"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((u,o)=>t.jsx(c.Input,{control:r,type:"time",name:u.name},o))},d)]})]},d))}),t.jsxs("div",{className:i.buttons,children:[t.jsx(y,{type:"submit",children:h.btn.acceptFilters}),t.jsx(y,{type:"button",theme:"white",onClick:v,children:h.btn.clearFilters})]})]})]})};export{q as default};
