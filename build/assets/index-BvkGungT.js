const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ErrorPage-lpguUE7Y.js","assets/vendor-D5vbP1IM.js","assets/ErrorPage-BHnq3BIH.css","assets/MainPage-DbBphxJ6.js","assets/Filter-B3dguq9S.js","assets/Filter-B1g5z2G7.css"])))=>i.map(i=>d[i]);
import{u as U,c as Bt,a as us,p as ct,s as De,d as He,r as m,b as Q,e as g,j as e,L as ps,f as Ot,g as ms,o as it,h as Re,i as Fe,k as lt,l as Ve,F as qe,m as ze,n as Dt,A as xs,q as _s,t as gs,v as js,w as Cs,x as fs,C as ye,y as ws,z as Ht,B as bs,D as ue,S as Z,E as vs,G as ys,H as ks,I as Be,J as Ss,K as Is,R as Ns,M as Ct,N as Ps,P as Ls,O as $s,Q as As}from"./vendor-D5vbP1IM.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const Ue=()=>U(),Ts={me:null,isAuth:!1},Rt=Bt({name:"userProfile",initialState:Ts,reducers:{login:(s,t)=>{s.me=t.payload.me,s.isAuth=t.payload.isAuth},logout:s=>{s.me=null,s.isAuth=!1}}}),{actions:Ce,reducer:oi}=Rt,Ms="http://87.228.19.167:3000/",$=us.create({baseURL:Ms});$.interceptors.request.use(s=>{const{accessToken:t}=ct();return t&&(s.headers.Authorization=`Bearer ${t}`),s});$.interceptors.response.use(s=>s,async s=>{var r;const t=s.config,{refreshToken:n}=ct();if(((r=s.response)==null?void 0:r.status)===401&&n&&!t._retry){t._retry=!0;try{const{status:o,data:a}=await te.updateToken(n);if(o===200)return De(null,"accessToken",a.accessToken,{maxAge:60*15,path:"/",sameSite:"Strict"}),t.headers.Authorization=`Bearer ${a.accessToken}`,$(t)}catch(o){console.error("Не удалось обновить токен",o)}}return He(null,"accessToken"),He(null,"refreshToken"),Promise.reject(s)});const le=class le{};le.registerNewUser=t=>$.post("/auth/register",t),le.logIn=t=>$.post("/auth/login",t),le.updateToken=t=>$.post("/auth/update-token",{token:t}),le.verifyAccessToken=()=>$.post("/auth/verify-user");let te=le;const Ft=()=>{const s=te.registerNewUser,t=te.logIn,n=te.updateToken,r=te.verifyAccessToken;return{createNewUser:s,logIn:t,updateToken:n,verifyAccessToken:r}},Es=()=>{const[s,t]=m.useState(!0),n=Ue(),r=Q(),{verifyAccessToken:o,updateToken:a}=Ft(),c=ct(),i=c.accessToken,l=c.refreshToken;return m.useEffect(()=>{(async()=>{try{if(i){const u=await o();if(u.status===200){const{user:x}=u.data;n(Ce.login({isAuth:!0,me:{id:String(x.id),email:x.email}}));return}}if(l){const u=await a(l);if(u.status===200){const{accessToken:x,id:_,email:f}=u.data;De(null,"accessToken",x,{maxAge:900,path:"/",sameSite:"Strict"}),n(Ce.login({isAuth:!0,me:{id:String(_),email:f}}));return}}r("/")}catch(u){console.error("Authentication error:",u),r("/")}finally{t(!1)}})()},[]),{logOut:()=>{He(null,"accessToken"),He(null,"refreshToken"),n(Ce.logout())},isLoading:s}},L={mainPage:"/",prices:"/price",createPriceItem:"/price/create",editPriceItem:"/price/edit/:id",uploadPrice:"/price/upload",downloadPrice:"/price/download"},Bs="modulepreload",Os=function(s){return"/"+s},ft={},dt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.all(n.map(i=>{if(i=Os(i),i in ft)return;ft[i]=!0;const l=i.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${d}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":Bs,l||(h.as="script",h.crossOrigin=""),h.href=i,c&&h.setAttribute("nonce",c),document.head.appendChild(h),l)return new Promise((u,x)=>{h.addEventListener("load",u),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${i}`)))})}))}return o.then(()=>t()).catch(a=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a})},Ds=m.lazy(()=>dt(()=>import("./ErrorPage-lpguUE7Y.js"),__vite__mapDeps([0,1,2]))),wt={"theme-default":"_theme-default_ctw6i_44","theme-main":"_theme-main_ctw6i_51","theme-clear":"_theme-clear_ctw6i_58"},fe=s=>{const{className:t,to:n,isNative:r=!1,children:o,theme:a="default",ref:c,...i}=s,l=g(wt.AppLink,wt[`theme-${a}`],t);return r?e.jsx("a",{className:l,href:n,...i,children:o}):e.jsx(ps,{className:l,to:n,...i,children:o})},Vt=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M6 9L12 15L18 9",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},qt=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 12H4M4 12L10 18M4 12L10 6",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Hs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 12H20M20 12L14 18M20 12L14 6",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Rs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4.93 4.93L19.07 19.07M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},ht=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},zt=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M6.3424 6.34315L17.6561 17.6569M17.6561 6.34315L6.3424 17.6569",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},ut=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 3H15M3 6H21M19 6L18.2987 16.5193C18.1935 18.0975 18.1409 18.8867 17.8 19.485C17.4999 20.0118 17.0472 20.4353 16.5017 20.6997C15.882 21 15.0911 21 13.5093 21H10.4907C8.90891 21 8.11803 21 7.49834 20.6997C6.95276 20.4353 6.50009 20.0118 6.19998 19.485C5.85911 18.8867 5.8065 18.0975 5.70129 16.5193L5 6M10 10.5V15.5M14 10.5V15.5",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Fs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsxs("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z",fill:r}),e.jsx("path",{d:"M12 6C12.5523 6 13 5.55228 13 5C13 4.44772 12.5523 4 12 4C11.4477 4 11 4.44772 11 5C11 5.55228 11.4477 6 12 6Z",fill:r}),e.jsx("path",{d:"M12 20C12.5523 20 13 19.5523 13 19C13 18.4477 12.5523 18 12 18C11.4477 18 11 18.4477 11 19C11 19.5523 11.4477 20 12 20Z",fill:r}),e.jsx("path",{d:"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 6C12.5523 6 13 5.55228 13 5C13 4.44772 12.5523 4 12 4C11.4477 4 11 4.44772 11 5C11 5.55228 11.4477 6 12 6Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 20C12.5523 20 13 19.5523 13 19C13 18.4477 12.5523 18 12 18C11.4477 18 11 18.4477 11 19C11 19.5523 11.4477 20 12 20Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},Vs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M17.4347 10.2904L13.7096 6.5653M3 21L6.15176 20.6498C6.53683 20.607 6.72937 20.5856 6.90933 20.5274C7.06899 20.4757 7.22093 20.4027 7.36103 20.3103C7.51894 20.2061 7.65592 20.0692 7.92989 19.7952L20.2285 7.49658C21.2572 6.46792 21.2572 4.80014 20.2285 3.77149C19.1999 2.74284 17.5321 2.74284 16.5034 3.77149L4.20481 16.0701C3.93085 16.3441 3.79387 16.4811 3.68973 16.639C3.59735 16.7791 3.52432 16.931 3.47263 17.0907C3.41437 17.2706 3.39298 17.4632 3.3502 17.8482L3 21Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},qs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M10.7429 5.09232C11.1494 5.03223 11.5686 5 12.0004 5C17.1054 5 20.4553 9.50484 21.5807 11.2868C21.7169 11.5025 21.785 11.6103 21.8231 11.7767C21.8518 11.9016 21.8517 12.0987 21.8231 12.2236C21.7849 12.3899 21.7164 12.4985 21.5792 12.7156C21.2793 13.1901 20.8222 13.8571 20.2165 14.5805M6.72432 6.71504C4.56225 8.1817 3.09445 10.2194 2.42111 11.2853C2.28428 11.5019 2.21587 11.6102 2.17774 11.7765C2.1491 11.9014 2.14909 12.0984 2.17771 12.2234C2.21583 12.3897 2.28393 12.4975 2.42013 12.7132C3.54554 14.4952 6.89541 19 12.0004 19C14.0588 19 15.8319 18.2676 17.2888 17.2766M3.00042 3L21.0004 21M9.8791 9.87868C9.3362 10.4216 9.00042 11.1716 9.00042 12C9.00042 13.6569 10.3436 15 12.0004 15C12.8288 15 13.5788 14.6642 14.1217 14.1213",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},zs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsxs("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M2.42012 12.7132C2.28394 12.4975 2.21584 12.3897 2.17772 12.2234C2.14909 12.0985 2.14909 11.9015 2.17772 11.7766C2.21584 11.6103 2.28394 11.5025 2.42012 11.2868C3.54553 9.50484 6.8954 5 12.0004 5C17.1054 5 20.4553 9.50484 21.5807 11.2868C21.7169 11.5025 21.785 11.6103 21.8231 11.7766C21.8517 11.9015 21.8517 12.0985 21.8231 12.2234C21.785 12.3897 21.7169 12.4975 21.5807 12.7132C20.4553 14.4952 17.1054 19 12.0004 19C6.8954 19 3.54553 14.4952 2.42012 12.7132Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12.0004 15C13.6573 15 15.0004 13.6569 15.0004 12C15.0004 10.3431 13.6573 9 12.0004 9C10.3435 9 9.0004 10.3431 9.0004 12C9.0004 13.6569 10.3435 15 12.0004 15Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},Us=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 5.44161C3 4.937 3 4.68469 3.09809 4.49196C3.18438 4.32242 3.32206 4.18459 3.49141 4.0982C3.68393 4 3.93595 4 4.44 4H19.56C20.064 4 20.3161 4 20.5086 4.0982C20.6779 4.18459 20.8156 4.32242 20.9019 4.49196C21 4.68469 21 4.937 21 5.44161V6.04474C21 6.28693 21 6.40802 20.9704 6.52063C20.9442 6.62041 20.9011 6.71495 20.843 6.80012C20.7773 6.89623 20.6859 6.97554 20.5031 7.13415L14.7469 12.1284C14.5641 12.2871 14.4727 12.3664 14.407 12.4625C14.3489 12.5477 14.3058 12.6422 14.2796 12.742C14.25 12.8546 14.25 12.9757 14.25 13.2179V17.9281C14.25 18.1043 14.25 18.1924 14.2216 18.2686C14.1965 18.3359 14.1557 18.3962 14.1026 18.4445C14.0425 18.4992 13.9608 18.5319 13.7974 18.5974L10.7374 19.8227C10.4066 19.9552 10.2412 20.0214 10.1084 19.9938C9.99234 19.9697 9.89045 19.9006 9.82493 19.8016C9.75 19.6885 9.75 19.5102 9.75 19.1535V13.2179C9.75 12.9757 9.75 12.8546 9.72044 12.742C9.69424 12.6422 9.65112 12.5477 9.59296 12.4625C9.52732 12.3664 9.43591 12.2871 9.2531 12.1284L3.4969 7.13415C3.31409 6.97554 3.22268 6.89623 3.15704 6.80012C3.09888 6.71495 3.05576 6.62041 3.02956 6.52063C3 6.40802 3 6.28693 3 6.04474V5.44161Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Ws=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 16V12M12 8H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Ut=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 12H4",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Wt=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M11.6107 15.3649C11.3387 15.3649 11.1239 15.2758 10.9664 15.0975C10.8233 14.9192 10.7374 14.6667 10.7087 14.3398L10.0644 5.8273C10.0215 5.27762 10.136 4.83937 10.4081 4.51253C10.6801 4.17084 11.081 4 11.6107 4C12.1262 4 12.5128 4.17084 12.7705 4.51253C13.0425 4.83937 13.157 5.27762 13.1141 5.8273L12.4698 14.3398C12.4555 14.6667 12.3696 14.9192 12.2121 15.0975C12.0689 15.2758 11.8685 15.3649 11.6107 15.3649ZM11.6107 20C11.1239 20 10.7302 19.844 10.4295 19.532C10.1432 19.2201 10 18.8189 10 18.3287C10 17.8533 10.1432 17.467 10.4295 17.1699C10.7302 16.8579 11.1239 16.702 11.6107 16.702C12.1119 16.702 12.4984 16.8579 12.7705 17.1699C13.0568 17.467 13.2 17.8533 13.2 18.3287C13.2 18.8189 13.0568 19.2201 12.7705 19.532C12.4984 19.844 12.1119 20 11.6107 20Z",fill:r})})},he=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 4V20M20 12H4",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Zs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 8H8.6C8.03995 8 7.75992 8 7.54601 7.89101C7.35785 7.79513 7.20487 7.64215 7.10899 7.45399C7 7.24008 7 6.96005 7 6.4V3M17 21V14.6C17 14.0399 17 13.7599 16.891 13.546C16.7951 13.3578 16.6422 13.2049 16.454 13.109C16.2401 13 15.9601 13 15.4 13H8.6C8.03995 13 7.75992 13 7.54601 13.109C7.35785 13.2049 7.20487 13.3578 7.10899 13.546C7 13.7599 7 14.0399 7 14.6V21M21 9.32548V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3H14.6745C15.1637 3 15.4083 3 15.6385 3.05526C15.8425 3.10425 16.0376 3.18506 16.2166 3.29472C16.4184 3.4184 16.5914 3.59135 16.9373 3.93726L20.0627 7.06274C20.4086 7.40865 20.5816 7.5816 20.7053 7.78343C20.8149 7.96237 20.8957 8.15746 20.9447 8.36154C21 8.59171 21 8.8363 21 9.32548Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Zt=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Xs=s=>{const{width:t=24,height:n=24,color:r="#8383A4",className:o}=s;return e.jsxs("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M18.7273 14.7273C18.6063 15.0015 18.5702 15.3056 18.6236 15.6005C18.6771 15.8954 18.8177 16.1676 19.0273 16.3818L19.0818 16.4364C19.2509 16.6052 19.385 16.8057 19.4765 17.0265C19.568 17.2472 19.6151 17.4838 19.6151 17.7227C19.6151 17.9617 19.568 18.1983 19.4765 18.419C19.385 18.6397 19.2509 18.8402 19.0818 19.0091C18.913 19.1781 18.7124 19.3122 18.4917 19.4037C18.271 19.4952 18.0344 19.5423 17.7955 19.5423C17.5565 19.5423 17.3199 19.4952 17.0992 19.4037C16.8785 19.3122 16.678 19.1781 16.5091 19.0091L16.4545 18.9545C16.2403 18.745 15.9682 18.6044 15.6733 18.5509C15.3784 18.4974 15.0742 18.5335 14.8 18.6545C14.5311 18.7698 14.3018 18.9611 14.1403 19.205C13.9788 19.4489 13.8921 19.7347 13.8909 20.0273V20.1818C13.8909 20.664 13.6994 21.1265 13.3584 21.4675C13.0174 21.8084 12.5549 22 12.0727 22C11.5905 22 11.1281 21.8084 10.7871 21.4675C10.4461 21.1265 10.2545 20.664 10.2545 20.1818V20.1C10.2475 19.7991 10.1501 19.5073 9.97501 19.2625C9.79991 19.0176 9.55521 18.8312 9.27273 18.7273C8.99853 18.6063 8.69437 18.5702 8.39947 18.6236C8.10456 18.6771 7.83244 18.8177 7.61818 19.0273L7.56364 19.0818C7.39478 19.2509 7.19425 19.385 6.97353 19.4765C6.7528 19.568 6.51621 19.6151 6.27727 19.6151C6.03834 19.6151 5.80174 19.568 5.58102 19.4765C5.36029 19.385 5.15977 19.2509 4.99091 19.0818C4.82186 18.913 4.68775 18.7124 4.59626 18.4917C4.50476 18.271 4.45766 18.0344 4.45766 17.7955C4.45766 17.5565 4.50476 17.3199 4.59626 17.0992C4.68775 16.8785 4.82186 16.678 4.99091 16.5091L5.04545 16.4545C5.25503 16.2403 5.39562 15.9682 5.4491 15.6733C5.50257 15.3784 5.46647 15.0742 5.34545 14.8C5.23022 14.5311 5.03887 14.3018 4.79497 14.1403C4.55107 13.9788 4.26526 13.8921 3.97273 13.8909H3.81818C3.33597 13.8909 2.87351 13.6994 2.53253 13.3584C2.19156 13.0174 2 12.5549 2 12.0727C2 11.5905 2.19156 11.1281 2.53253 10.7871C2.87351 10.4461 3.33597 10.2545 3.81818 10.2545H3.9C4.2009 10.2475 4.49273 10.1501 4.73754 9.97501C4.98236 9.79991 5.16883 9.55521 5.27273 9.27273C5.39374 8.99853 5.42984 8.69437 5.37637 8.39947C5.3229 8.10456 5.18231 7.83244 4.97273 7.61818L4.91818 7.56364C4.74913 7.39478 4.61503 7.19425 4.52353 6.97353C4.43203 6.7528 4.38493 6.51621 4.38493 6.27727C4.38493 6.03834 4.43203 5.80174 4.52353 5.58102C4.61503 5.36029 4.74913 5.15977 4.91818 4.99091C5.08704 4.82186 5.28757 4.68775 5.50829 4.59626C5.72901 4.50476 5.96561 4.45766 6.20455 4.45766C6.44348 4.45766 6.68008 4.50476 6.9008 4.59626C7.12152 4.68775 7.32205 4.82186 7.49091 4.99091L7.54545 5.04545C7.75971 5.25503 8.03183 5.39562 8.32674 5.4491C8.62164 5.50257 8.9258 5.46647 9.2 5.34545H9.27273C9.54161 5.23022 9.77093 5.03887 9.93245 4.79497C10.094 4.55107 10.1807 4.26526 10.1818 3.97273V3.81818C10.1818 3.33597 10.3734 2.87351 10.7144 2.53253C11.0553 2.19156 11.5178 2 12 2C12.4822 2 12.9447 2.19156 13.2856 2.53253C13.6266 2.87351 13.8182 3.33597 13.8182 3.81818V3.9C13.8193 4.19253 13.906 4.47834 14.0676 4.72224C14.2291 4.96614 14.4584 5.15749 14.7273 5.27273C15.0015 5.39374 15.3056 5.42984 15.6005 5.37637C15.8954 5.3229 16.1676 5.18231 16.3818 4.97273L16.4364 4.91818C16.6052 4.74913 16.8057 4.61503 17.0265 4.52353C17.2472 4.43203 17.4838 4.38493 17.7227 4.38493C17.9617 4.38493 18.1983 4.43203 18.419 4.52353C18.6397 4.61503 18.8402 4.74913 19.0091 4.91818C19.1781 5.08704 19.3122 5.28757 19.4037 5.50829C19.4952 5.72901 19.5423 5.96561 19.5423 6.20455C19.5423 6.44348 19.4952 6.68008 19.4037 6.9008C19.3122 7.12152 19.1781 7.32205 19.0091 7.49091L18.9545 7.54545C18.745 7.75971 18.6044 8.03183 18.5509 8.32674C18.4974 8.62164 18.5335 8.9258 18.6545 9.2V9.27273C18.7698 9.54161 18.9611 9.77093 19.205 9.93245C19.4489 10.094 19.7347 10.1807 20.0273 10.1818H20.1818C20.664 10.1818 21.1265 10.3734 21.4675 10.7144C21.8084 11.0553 22 11.5178 22 12C22 12.4822 21.8084 12.9447 21.4675 13.2856C21.1265 13.6266 20.664 13.8182 20.1818 13.8182H20.1C19.8075 13.8193 19.5217 13.906 19.2778 14.0676C19.0339 14.2291 18.8425 14.4584 18.7273 14.7273Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},Qs=s=>{const{width:t="24",height:n="24",color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M22 9H2M2 7.8L2 16.2C2 17.8802 2 18.7202 2.32698 19.362C2.6146 19.9265 3.07354 20.3854 3.63803 20.673C4.27976 21 5.11984 21 6.8 21H17.2C18.8802 21 19.7202 21 20.362 20.673C20.9265 20.3854 21.3854 19.9265 21.673 19.362C22 18.7202 22 17.8802 22 16.2V7.8C22 6.11984 22 5.27977 21.673 4.63803C21.3854 4.07354 20.9265 3.6146 20.362 3.32698C19.7202 3 18.8802 3 17.2 3L6.8 3C5.11984 3 4.27976 3 3.63803 3.32698C3.07354 3.6146 2.6146 4.07354 2.32698 4.63803C2 5.27976 2 6.11984 2 7.8Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Js=s=>{const{width:t="24",height:n="24",color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M2 14L22 14M8 21H16M6.8 18H17.2C18.8802 18 19.7202 18 20.362 17.673C20.9265 17.3854 21.3854 16.9265 21.673 16.362C22 15.7202 22 14.8802 22 13.2V7.8C22 6.11984 22 5.27976 21.673 4.63803C21.3854 4.07354 20.9265 3.6146 20.362 3.32698C19.7202 3 18.8802 3 17.2 3H6.8C5.11984 3 4.27976 3 3.63803 3.32698C3.07354 3.6146 2.6146 4.07354 2.32698 4.63803C2 5.27976 2 6.11984 2 7.8V13.2C2 14.8802 2 15.7202 2.32698 16.362C2.6146 16.9265 3.07354 17.3854 3.63803 17.673C4.27976 18 5.11984 18 6.8 18Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Ks=s=>{const{width:t="24",height:n="24",color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 8L16 12M16 12L12 16M16 12H3M3.33782 7C5.06687 4.01099 8.29859 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C8.29859 22 5.06687 19.989 3.33782 17",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Ys=s=>{const{width:t="24",height:n="24",color:r="#8383A4",className:o}=s;return e.jsx("svg",{className:o,width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19.7959 16.5C18.2398 19.1901 15.3312 21 12 21C7.02942 21 3 16.9706 3 12C3 7.02944 7.02942 3 12 3C15.3312 3 18.2398 4.80989 19.7959 7.5M12 8.4L8.40004 12M8.40004 12L12 15.6M8.40004 12H21",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},Gs=m.createContext({path:"",setPath:()=>{},params:{},setParams:()=>{}}),en=()=>m.useContext(Gs),tn=s=>{const{setPath:t,setParams:n}=en(),r=Ot();return m.useEffect(()=>{t(s.path),n(r)},[s.path,r]),s.children},sn="_Container_x3t6n_44",bt={Container:sn,"size-xs":"_size-xs_x3t6n_50","size-m":"_size-m_x3t6n_54","size-l":"_size-l_x3t6n_58"},pe=s=>{const{className:t,size:n,children:r}=s,o=bt.Container,a=n?bt[`size-${n}`]:"",c=g(o,a,t||"");return e.jsx("div",{className:c,children:r})},nn="_wrapper_10qbw_44",rn={wrapper:nn},on="_Content_geq72_44",an="_filled_geq72_51",vt={Content:on,filled:an},se=s=>{const{children:t,className:n,filledHeight:r}=s,o=vt.Content,a=r?vt.filled:"",c=g(o,a,n||"");return e.jsx("div",{className:c,children:t})},Xt=()=>e.jsx(pe,{className:rn.wrapper,children:e.jsx(se,{children:e.jsx("span",{children:"Загрузка страницы"})})}),cn=m.lazy(()=>dt(()=>import("./MainPage-DbBphxJ6.js"),__vite__mapDeps([3,1]))),ln="30",Qt=["30","50","100"],me=s=>{const[t,n]=ms(),r=t.toString().split("&").reduce((a,c)=>(c==="=undefined"||(a[String(c.split("=")[0])]=decodeURIComponent(c.split("=")[1])),a),{});return m.useEffect(()=>{!t.toString()&&s&&n(s)},[]),[r,(a,c)=>{try{const i=a(r),d=Object.keys(a(i)).reduce((h,u)=>i[u]?{...h,[u]:decodeURIComponent(decodeURIComponent(i[u]))}:h,{});JSON.stringify(d)!==JSON.stringify(r)&&n(d,{replace:c})}catch{const d=Object.keys(a).reduce((h,u)=>a[u]?{...h,[u]:decodeURIComponent(decodeURIComponent(a[u]))}:h,{});JSON.stringify(d)!==JSON.stringify(r)&&n(d,{replace:c})}}]};class dn{constructor(){this.result=!0,this.isNumber=t=>this.result?(this.result=typeof t=="string"&&/^\d+$/.test(t),this):this,this.hasInArray=(t,n)=>this.result?(this.result=n.filter(r=>r===t).length>0,this):this,this.isDate=t=>{if(!this.result)return this;if(typeof t=="string"){const n=t.split("-"),r=new Date(parseInt(n[0]),parseInt(n[1])-1,parseInt(n[2]));this.result=r.getFullYear()===parseInt(n[0])&&r.getMonth()===parseInt(n[1])-1&&r.getDate()===parseInt(n[2])}else this.result=!1;return this}}}const Jt=(s,t,n)=>{if(s.length>0){const r=new dn;if(s.length===1)return r[s[0]](t,n??null).result;{const o=r[s[0]](t,n??null).result;return o&&Jt(s.splice(1,s.length),t,n??null)}}return!1},Kt=s=>{const t={page:{rules:["isNumber"],safeValue:"1"},limit:{rules:["hasInArray"],values:Qt,safeValue:ln},q:{rules:[],safeValue:""},...s},[n]=me();return m.useMemo(()=>Object.keys(t).reduce((r,o)=>{const a=o;if(a in n){const c=n[a];t[a].rules.length>0?r[a]=Jt(t[a].rules,c,t[a].values)?c:t[a].safeValue:r[a]=c}else r[a]=t[a].safeValue;return r},{}),[n])},yt=(s,t)=>t[s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2],p={hint:{password:"Пароль должен состоять минимум из 8 символов, содержать прописные и строчные буквы латинского алфавита, цифры и спецсимволы.",coordinatesFormat:"Формат 00.000000"},rules:{required:"Это поле обязательное",minLength:"Минимальное значение символов: length",maxLength:"Максимальное значение символов: length",domain:"Введите корректное доменное имя",password_confirm:"Пароли не совпадают",email:"Неверный формат email",emailDuplicate:"Такой email уже задан",unique:"Такое значение уже существует. Поле должно быть уникальным",username:"Имя может содержать только кириллицу",phone:"Неправильный формат телефона",coords:"Неправильный формат координат",incorrectSymbol:"Поле содержит недопустимые символы",timePeriod:"Неправильный формат времени",invalidTimePeriod:"Время начала не может быть больше время окончания",blockTry:s=>`${yt(s,["Осталась","Осталось","Осталось"])} ${s} ${yt(s,["попытка","попытки","попытки"])}. Ваша учетная запись будет заблокирована или попробуйте повторить вход через 1 сутки.`},field:{companyName:"Название компании",login:"Логин",password:"Пароль",newPassword:"Новый пароль",repeatPassword:"Повторите пароль",email:"Email",emailRecover:"E-mail для восстановления",title:"Название",title_en:"Название на латинице",description:"Описание",descriptionIsMainPage:"Описание для главной страницы",createdAt:"Дата создания",updatedAt:"Дата изменения",author:"Автор",legalName:"Юридическое наименование",activeStatus:"Статус активности",address:"Адрес",sales:"Продажи",service:"Сервис",additionalPhone:"Дополнительный",addPhone:"Добавить номер",mainEmail:"Основной e-mail",role:"Роль",firstName:"Имя",lastName:"Фамилия",surName:"Отчество",showBlocked:"Показать заблокированных",showRead:"Показать прочитанные",image_url:"Ссылка на изображение",type:"Тип"},btn:{signIn:"Войти",xlsx:"XLSX",register:"Регистрация",rememberPassword:"Забыли пароль",save:"Сохранить",refreshData:"Обновить данные",back:"Назад",add:"Добавить",delete:"Удалить",more:"Подробнее",edit:"Редактировать",block:"Заблокировать",create:"Создать",cancel:"Отменить",settingForm:"Настройки формы",addMore:"Добавить еще",activate:"Активировать",unblock:"Разблокировать",editSelection:"Изменить выбор",close:"Закрыть",acceptFilters:"Применить фильтры",clearFilters:"Сбросить фильтры",toSign:"К авторизации",addEmail:"Добавить e-mail"},title:{auth:"Авторизация",register:"Регистрация",priceElement:"Информация о товаре",creatNewPriceItem:"Создание нового товара",editPriceItem:"Изменение товара",newPassword:"Новый пароль",rememberPassword:"Восстановление пароля",checkYourEmail:"Проверьте почту",accountBlocked:"Учетная запись заблокирована",userUnblocked:"Пользователь разблокирован",passwordCreated:"Пароль создан",passwordEdited:"Пароль изменен",userBlocked:"Пользователь заблокирован",serviceUnavailable:"Сервис недоступен",siteContentList:"Список контентных страниц сайта",basePrice:"Основной прайс",FormList:"Список доступных форм",FormRequest:"Заявки по форме",siteDealersList:"Список дилерских центров",deleteConfirm:"Подтвердите удаление",createUser:"Создание пользователя",createAdmin:"Создание администратора дилерского центра",editing:"Редактирование",aboutSite:"О сайте",headerTitle:"Logo Design Production",filter:"Фильтры",userNotFound:"Пользователь не найден",pageNotFound:"Страница не найдена",admins:"Администраторы",changesSave:"Изменения сохранены",serverError:"Произошла непредвиденная ошибка",error:"Ошибка",additionalInfo:"Дополнительная информация",uploadingXLSXData:"Загрузка данных из XLSX в базу",downloadingXLSXData:"Выгрузить данные из базы",firstTenElements:"Вы видите первые 10 элементов загружаемого прайс листа"},text:{perPage:"Количество на странице:",selectFromList:"Выберите из списка",selectDealer:"Выберите дилера",selectRole:"Выберите роль",notFound:"Ничего не найдено",search:"Поиск",dataNotFound:"Данные не найдены",aboutPage:"О странице",aboutUser:"О пользователе",account:"Учетная запись",extra:"Дополнительно",phone:"Телефоны",email:"E-mail",filter:"Фильтр",acceptDelete:"Вы уверены что хотите удалить элемент",acceptDeleteFullPrice:"Вы уверены что хотите полностью очистить прайс?"},cell:{id:"ID",article:"Артикул",image:"Изображение",type:"Тип",name:"Наименование",brand:"Бренд",deliveryTime:"Срок поставки",quantity:"Количество",price:"Цена",purchasePrice:"Закупочная цена",supplier:"Поставщик",minOrderQty:"Мин. для заказа"},notification:{resetPasswordEmailSent:"На вашу почту :EMAIL: отправлено письмо для сброса пароля",uploadXlsx:"Ошибка загрузки прайс листа из EXCEL файла",xlsxSuccess:"Прайс лист успешно загружен",passwordAttemptsExceeded:"Превышено количество попыток ввода пароля. Обратитесь к администратору для восстановления доступа",userUnblockedWithName:"Пользователь userName разблокирован",generatedPasswordSent:"Сгенерированный пароль отправлен на указанную почту",userBlockedWithName:"Пользователь userName заблокирован",userUnBlockedWithName:"Пользователь userName разблокирован",failedToConnectToService:"Не удалось связаться с сервисом, попробуйте в другой раз",formatCoordinates:"Формат 00.000000",formatPhone:"Номер телефона должен содержать только цифры (без пробелов, скобок, тире и начинаться с 7)",incorrectLoginOrPassword:"Неверный логин и пароль"},status:{read:"Прочитан"},placeHolder:{statusSelect:"Выберите статус",enterNumber:"Введите число",selectType:"Выберите тип",supplier:"Введите название поставщика"},label:{isMain:"Сделать основным",listOrder:"Очередность в списке",article:"Артикул",name:"Название",brand:"Бренд",deliveryTime:"Срок поставки",quantity:"Количество",price:"Цена",purchasePrice:"Закупочная цена",supplier:"Поставщик",minOrderQty:"Мин. для заказа"}},hn="_actionIcon_8jdlw_44",un="_button_8jdlw_48",pn="_opened_8jdlw_58",mn="_contextMenu_8jdlw_61",xn="_list_8jdlw_71",_n="_item_8jdlw_76",gn="_itemReadOnly_8jdlw_81",jn="_itemIcon_8jdlw_85",Cn="_title_8jdlw_90",V={actionIcon:hn,button:un,opened:pn,contextMenu:mn,list:xn,item:_n,itemReadOnly:gn,itemIcon:jn,title:Cn},fn=s=>{const{list:t,children:n,className:r,listFontSettings:o={}}=s,[a,c]=m.useState(!1),i=()=>{c(w=>!w)},l=(w,b)=>{w.stopPropagation(),i(),b()},d=[it(4)],{refs:h,floatingStyles:u,context:x}=Re({open:a,onOpenChange:c,whileElementsMounted:Fe,placement:"bottom-end",middleware:d}),_=lt(x),{getReferenceProps:f,getFloatingProps:y}=Ve([_]);return e.jsxs("div",{className:g(V.Dropdown,r||""),children:[e.jsx("button",{onClick:i,onContextMenu:i,ref:h.setReference,...f(),children:n?n({isOpen:a}):e.jsx("div",{className:g(V.button,{[V.opened]:a}),children:e.jsx(Fs,{height:20,width:20})})}),a&&e.jsx(qe,{id:"dropdown",children:e.jsx(ze,{context:x,modal:!1,children:e.jsx(Dt.div,{className:V.contextMenu,ref:h.setFloating,style:u,...y(),initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:e.jsx("ul",{className:V.list,children:t.map(({title:w,Icon:b,cb:v,isReadOnly:M},H)=>e.jsxs("li",{className:g(V.item,{[V.itemReadOnly]:M}),onClick:k=>{!M&&l(k,v)},children:[b&&e.jsx("div",{className:V.itemIcon,children:b}),e.jsx("span",{className:V.title,...o,children:w})]},H))})})})})]})},wn={isOpen:!1,modalType:null,modalProps:{},additionalData:{},shouldRefetch:!1},Yt=Bt({name:"modal",initialState:wn,reducers:{openModal:(s,t)=>{s.isOpen=!0,s.modalType=t.payload.modalType,s.modalProps=t.payload.modalProps||{}},closeModal:s=>{s.isOpen=!1,s.modalType=null,s.modalProps={}},setAdditionalData:(s,t)=>{s.additionalData=t.payload.additionalData},clearAdditionalData:s=>{s.additionalData={}},setShouldRefetch(s){s.shouldRefetch=!0},resetShouldRefetch(s){s.shouldRefetch=!1}}}),{openModal:we,closeModal:ke,setShouldRefetch:bn,resetShouldRefetch:vn,setAdditionalData:yn,clearAdditionalData:kt}=Yt.actions,kn=Yt.reducer,E={main:"var(--color-main)",secondary:"var(--color-secondary)",error:"var(--color-error)",successful:"var(--color-successful)",text1:"var(--color-text-1)",text2:"var(--color-text-2)",text3:"var(--color-text-3)",text4:"var(--color-text-4)",border1:"var(--color-border-1)",border2:"var(--color-border-2)",white:"var(--color-white)",black:"var(--color-black)",background:"var(--color-background)",backgroundHeader:"var(--color-background-header)",backgroundError:"var(--color-background-error)",backgroundSuccessful:"var(--color-background-successful)",backgroundSection:"var(--color-background-section)"},St={more:{title:p.btn.more,Icon:e.jsx(Ws,{width:18,height:18})},edit:{title:p.btn.edit,Icon:e.jsx(Vs,{width:18,height:18})},delete:{title:p.btn.delete,Icon:e.jsx(ut,{color:E.error,width:18,height:18})},block:{title:p.btn.block,Icon:e.jsx(Rs,{color:E.error,width:18,height:18})},settingForm:{title:p.btn.settingForm,Icon:e.jsx(Xs,{width:18,height:18})}},Sn="_Button_12hk5_44",In="_Icon_12hk5_75",Pe={Button:Sn,"theme-primary":"_theme-primary_12hk5_71",Icon:In,"theme-secondary":"_theme-secondary_12hk5_82","theme-light":"_theme-light_12hk5_93","theme-light-clear":"_theme-light-clear_12hk5_105","theme-clear":"_theme-clear_12hk5_117","theme-remove":"_theme-remove_12hk5_129","theme-white":"_theme-white_12hk5_137","theme-empty-accent":"_theme-empty-accent_12hk5_143","mode-rounded":"_mode-rounded_12hk5_152","mode-box":"_mode-box_12hk5_157"},C=s=>{const{type:t="button",disabled:n,onClick:r,children:o,theme:a="primary",mode:c,Icon:i,loading:l,className:d,...h}=s,u=[Pe.Button,Pe[`theme-${a}`],c&&Pe[`mode-${c}`],d];return e.jsxs("button",{"aria-label":t,type:t,disabled:n||l,className:g(u),onClick:r,...h,children:[i&&e.jsx(i,{width:20,height:20,className:Pe.Icon}),o]})},Nn="_ModalDelete_7pitb_44",Pn="_header_7pitb_51",Ln="_header_title_7pitb_56",$n="_body_7pitb_60",An="_buttons_7pitb_64",ge={ModalDelete:Nn,header:Pn,header_title:Ln,body:$n,buttons:An},Gt=s=>e.jsxs("div",{className:ge.ModalDelete,children:[e.jsx("div",{className:ge.header,children:e.jsx("h3",{className:ge.header_title,children:p.title.deleteConfirm})}),e.jsx("div",{className:ge.body,children:s.children}),e.jsxs("div",{className:ge.buttons,children:[e.jsx(C,{theme:"remove",onClick:s.agree,disabled:s.isDisabled,children:p.btn.delete}),e.jsx(C,{theme:"light",onClick:s.cancel,children:p.btn.cancel})]})]}),It=(s,t={method:"get"})=>{const[n,r]=m.useState(null),[o,a]=m.useState(!1),[c,i]=m.useState(null),l=m.useCallback(async d=>{a(!0),i(null);try{const h=await $({url:s,method:t.method,headers:t.headers,...t.method==="get"?{params:d}:{data:d}});return r(h.data),h.data}catch(h){return h instanceof xs?(i(h),console.error("AxiosError:",h.message)):(i("Неизвестная ошибка"),console.error("Unknown error:",h)),Promise.reject(h)}finally{a(!1)}},[s,t]);return{data:n,error:c,isLoading:o,query:l}},ee=class ee{};ee.createPriceElement=t=>$.post("/price-list",t),ee.updatePriceElementById=(t,n)=>$.put(`/price-list/${n}`,t),ee.deletePriceElement=t=>$.delete(`/price-list/${t}`),ee.bulkUploadPrice=t=>$.post("/price-list/bulk-update",{updatedPriceList:t}),ee.deleteAllPrices=()=>$.delete("/price-list/delete-all");let G=ee;const ne=(s={})=>{const{id:t}=s,{data:n,query:r,error:o,isLoading:a}=It("/price-list/price"),{data:c,query:i,isLoading:l}=It(`/price-list/${t}`),d=G.deletePriceElement,h=G.createPriceElement,u=G.updatePriceElementById,x=G.bulkUploadPrice,_=G.deleteAllPrices;return{data:n,query:r,error:o,isLoading:a,dataById:c,queryById:i,isLoadingById:l,deleteElement:d,createElement:h,updateElement:u,bulkUpdatePrice:x,deletePrice:_}},Tn=s=>s>=200&&s<300,Se=_s,We=s=>s.modal,pt=s=>{const t=s==null?void 0:s.query,n=s==null?void 0:s.queryParams,r=U(),{shouldRefetch:o}=Se(We),a=()=>{r(bn())},c=()=>{r(vn())};return m.useEffect(()=>{(async()=>{if(o)try{await t(n)}catch(l){console.error("Error executing query:",l)}finally{c()}})()},[o,t,r]),{startRefetch:a}},Mn=s=>{const{id:t,name:n}=s,r=U(),{deleteElement:o}=ne(),{startRefetch:a}=pt(),c=()=>{r(ke())},i=async()=>{try{const l=await o(t);if(!Tn(l.status))return console.log("Ошибка проверки статуса запроса");a(),c()}catch(l){console.log("При удалении элемента возникла ошибка",l)}};return e.jsx(Gt,{cancel:c,agree:i,children:e.jsxs("span",{children:[p.text.acceptDelete," ",n," ?"]})})},En="_wrapper_1i10f_44",Bn="_body_1i10f_53",On="_buttons_1i10f_57",Ke={wrapper:En,body:Bn,buttons:On},Dn="_Alert_kmw20_44",Hn="_Icon_kmw20_53",Ye={Alert:Dn,Icon:Hn,"type-successful":"_type-successful_kmw20_65","type-error":"_type-error_kmw20_73"},Rn={successful:ht,error:Wt},Fn=s=>{const{children:t,type:n}=s,r=Rn[n];return e.jsxs("div",{className:g(Ye.Alert,[Ye[`type-${n}`]]),children:[e.jsx("div",{className:Ye.Icon,children:e.jsx(r,{width:20,height:20,color:n==="successful"?E.successful:E.error})}),e.jsx("span",{children:t})]})},Vn=s=>{const{message:t,type:n}=s,r=U(),o=()=>{r(ke())};return e.jsxs("div",{className:Ke.wrapper,children:[e.jsx("div",{className:Ke.body,children:e.jsx(Fn,{type:n,children:t})}),e.jsx("div",{className:Ke.buttons,children:e.jsx(C,{theme:n==="error"?"remove":"primary",onClick:o,children:p.btn.close})})]})},qn="_button_1v9rh_44",zn="_text_1v9rh_55",Un="_contextMenu_1v9rh_60",Wn="_arrow_1v9rh_74",Zn="_list_1v9rh_79",Xn="_item_1v9rh_83",Qn="_itemIcon_1v9rh_87",Le={button:qn,text:zn,contextMenu:Un,arrow:Wn,list:Zn,item:Xn,itemIcon:Qn},es=s=>{const{message:t,className:n}=s,[r,o]=m.useState(!0),a=()=>{o(_=>!_)},c=m.useRef(null),{refs:i,floatingStyles:l,context:d}=Re({open:r,onOpenChange:o,whileElementsMounted:Fe,placement:"bottom-end",middleware:[gs({element:c})]}),h=js(d,{handleClose:Cs({buffer:1})}),{getReferenceProps:u,getFloatingProps:x}=Ve([h]);return e.jsxs("div",{className:n,children:[e.jsx("button",{onClick:a,onMouseEnter:()=>o(!0),ref:i.setReference,...u(),children:e.jsx("div",{className:Le.button,children:e.jsx(Wt,{color:E.error,height:18,width:18})})}),r&&e.jsxs(qe,{id:"ValidationError",children:[e.jsx("div",{className:Le.arrow,ref:i.setFloating,style:l,children:e.jsx(fs,{strokeWidth:1,fill:E.white,stroke:E.border1,tipRadius:2,ref:c,context:d})}),e.jsx(ze,{context:d,modal:!1,children:e.jsx(Dt.div,{className:Le.contextMenu,ref:i.setFloating,style:l,...x(),initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:e.jsx("p",{className:Le.text,children:t})})})]})]})},Jn="_Container_dyn99_44",Kn="_Label_dyn99_48",Yn="_TextAreaContainer_dyn99_52",Gn="_TextAreaContainerError_dyn99_57",er="_TextArea_dyn99_52",tr="_withIcon_dyn99_60",sr="_toggleTypeBtn_dyn99_63",nr="_validation_dyn99_67",rr="_TextAreaError_dyn99_95",or="_Hint_dyn99_100",X={Container:Jn,Label:Kn,TextAreaContainer:Yn,TextAreaContainerError:Gn,TextArea:er,withIcon:tr,toggleTypeBtn:sr,validation:nr,TextAreaError:rr,Hint:or},ar=s=>{const{className:t,value:n,onChange:r,onBlur:o,onFocus:a,label:c="",placeholder:i="",disabled:l,error:d,hint:h,autoComplete:u}=s,[x,_]=m.useState(i),f=v=>{r==null||r(v.target.value)},y=v=>{_(i),o&&o(v)},w=v=>{_(""),a&&a(v)},b=m.useId();return e.jsxs("div",{className:g(X.Container,t||""),children:[e.jsx("div",{children:c&&e.jsx("label",{className:X.Label,htmlFor:b,children:c})}),e.jsxs("div",{className:g(X.TextAreaContainer,{[X.TextAreaContainerError]:d}),children:[e.jsx("textarea",{autoComplete:u,value:n??"",placeholder:x,disabled:l,onChange:f,onFocus:w,onBlur:y,id:b,className:g(X.TextArea,{[X.TextAreaError]:d})}),d&&e.jsx(es,{className:X.validation,message:d})]}),h&&e.jsx("p",{className:X.Hint,children:h}),d&&e.jsx("span",{role:"validation-error",className:"error"})]})},cr=s=>{const{control:t,name:n,rules:r,...o}=s;return e.jsx(ye,{control:t,rules:r,render:({field:{onChange:a,value:c},fieldState:{error:i}})=>e.jsx(ar,{...o,error:i==null?void 0:i.message,onChange:l=>{a(l),o.onChange&&o.onChange(l)},value:c,name:n}),name:n})},ir="_CheckboxControl_gpzm1_44",lr="_Checkbox_gpzm1_44",dr="_CheckboxText_gpzm1_81",Ge={CheckboxControl:ir,Checkbox:lr,CheckboxText:dr},hr=s=>{const{children:t,className:n,label:r,value:o,onChange:a,disabled:c}=s,i=m.useId();return e.jsx("div",{className:n,children:e.jsxs("label",{className:Ge.Checkbox,children:[e.jsx("input",{type:"checkbox",checked:o,onChange:()=>{a&&a(!o)},disabled:c,id:i}),e.jsx("label",{htmlFor:i,className:Ge.CheckboxControl,children:e.jsx(ht,{color:E.white,width:16,height:16})}),(r||t)&&e.jsx("label",{className:Ge.CheckboxText,htmlFor:i,children:r||t})]})})},ur=s=>{const{control:t,name:n,...r}=s;return e.jsx(ye,{control:t,render:({field:{onChange:o,value:a},fieldState:{error:c}})=>e.jsx(hr,{...r,error:c==null?void 0:c.message,onChange:i=>{o(i),r.onChange&&r.onChange(i)},value:a}),name:n})},pr="_Container_145ur_44",mr="_InputContainer_145ur_51",xr="_InputContainerError_145ur_59",_r="_Input_145ur_51",gr="_withIcon_145ur_62",jr="_toggleTypeBtn_145ur_65",Cr="_validation_145ur_69",fr="_InputError_145ur_96",wr="_Hint_145ur_101",q={Container:pr,InputContainer:mr,InputContainerError:xr,Input:_r,withIcon:gr,toggleTypeBtn:jr,validation:Cr,InputError:fr,Hint:wr},br=s=>{const{className:t,value:n,onChange:r,onBlur:o,onFocus:a,type:c="text",label:i="",placeholder:l="",disabled:d,inputMode:h,error:u,hint:x,autoComplete:_}=s,[f,y]=m.useState(c),[w,b]=m.useState(l),v=c==="password",M=f==="password",H=B=>{r==null||r(B.target.value)},k=B=>{b(l),o&&o(B)},W=B=>{b(""),a&&a(B)},xe=()=>{y(B=>B==="password"?"text":"password")},re=m.useId();return e.jsxs("div",{className:g(q.Container,t||""),children:[i&&e.jsx("label",{htmlFor:re,children:i}),e.jsxs("div",{className:g(q.InputContainer,{[q.InputContainerError]:u}),children:[e.jsx("input",{autoComplete:_,type:f,inputMode:h,value:n??"",placeholder:w,disabled:d,onChange:H,onFocus:W,onBlur:k,id:re,className:g(q.Input,{[q.InputError]:u,[q.withIcon]:v})}),v&&e.jsx("button",{className:q.toggleTypeBtn,type:"button",onClick:xe,children:M?e.jsx(qs,{}):e.jsx(zs,{})}),u&&e.jsx(es,{"data-testid":`error-${s.name}`,className:q.validation,message:u})]}),x&&e.jsx("p",{className:q.Hint,children:x}),u&&e.jsx("span",{role:"validation-error",className:"error"})]})},vr=s=>{const{control:t,name:n,rules:r,...o}=s;return e.jsx(ye,{control:t,rules:r,render:({field:{onChange:a,value:c},fieldState:{error:i}})=>e.jsx(br,{...o,error:i==null?void 0:i.message,onChange:l=>{a(l),o.onChange&&o.onChange(l)},value:c,name:n}),name:n})},yr="_OptionItem_1rn5x_44",kr="_disabled_1rn5x_50",Sr="_hidden_1rn5x_53",Nt={OptionItem:yr,disabled:kr,hidden:Sr},Ir=s=>{const{option:t,onChange:n}=s,r=t.disabled||t.isInactive,o=c=>r?()=>{}:()=>c(),a=()=>{n(t)};return e.jsx("div",{role:"option",className:g(Nt.OptionItem,{[Nt.disabled]:r}),onClick:o(a),children:e.jsx("span",{children:t.label})})},Nr="_Container_jiy9z_44",Pr="_Label_jiy9z_48",Lr="_Input_jiy9z_52",$r="_InputDisabled_jiy9z_65",Ar="_InputActive_jiy9z_65",Tr="_InputError_jiy9z_74",Mr="_Hint_jiy9z_79",Er="_contextMenu_jiy9z_83",Br="_Value_jiy9z_94",Or="_Icon_jiy9z_102",Dr="_SearchContainer_jiy9z_109",Hr="_Search_jiy9z_109",Rr="_SearchIcon_jiy9z_116",T={Container:Nr,Label:Pr,Input:Lr,InputDisabled:$r,InputActive:Ar,InputError:Tr,Hint:Mr,contextMenu:Er,Value:Br,Icon:Or,SearchContainer:Dr,Search:Hr,SearchIcon:Rr},ts=s=>{const{label:t,className:n,hint:r,disabled:o,error:a,placeholder:c=p.text.selectFromList,isSearchable:i=!0,options:l,value:d,onChange:h,paginate:u,loading:x}=s,[_,f]=m.useState(""),[y,w]=m.useState(!1),b=m.useId(),{ref:v,inView:M}=ws({threshold:0}),{refs:H,floatingStyles:k,context:W}=Re({open:y,onOpenChange:w,whileElementsMounted:Fe,middleware:[it(5),bs({apply({rects:I,elements:j,availableHeight:P}){Object.assign(j.floating.style,{maxHeight:`${P}px`,maxWidth:`${I.reference.width}px`,minWidth:`${I.reference.width}px`})}})]}),xe=lt(W,{event:"mousedown",enabled:!o,keyboardHandlers:!1}),re=Ht(W,{enabled:!o}),{getReferenceProps:B,getFloatingProps:Ze}=Ve([xe,re]),Xe=I=>{h==null||h(I),w(!1)};m.useEffect(()=>{M&&u&&!x&&u(_)},[M,_]);const Ie=d===null?"":d==null?void 0:d.label,Qe=I=>I.label.toLowerCase().match(_.toLowerCase())!==null,oe=_.length>0&&!u?l.filter(Qe):l;return e.jsxs("div",{className:g(T.Container,n||""),children:[t&&e.jsx("label",{className:T.Label,htmlFor:b,children:t}),e.jsxs("div",{ref:H.setReference,...B(),className:g(T.Input,{[T.InputError]:a,[T.InputActive]:y,[T.InputDisabled]:o}),children:[e.jsx("div",{className:T.Value,children:Ie?e.jsx("span",{children:Ie}):e.jsx("span",{children:c})}),e.jsx("div",{className:T.Icon,children:e.jsx(Vt,{width:20,height:20})})]}),y&&e.jsx(qe,{id:"dropdown",children:e.jsx(ze,{context:W,modal:!1,children:e.jsxs("div",{className:T.contextMenu,ref:H.setFloating,style:k,...Ze(),children:[i&&e.jsx("div",{className:T.SearchContainer,children:e.jsxs("label",{className:T.Search,children:[e.jsx(Zt,{width:20,height:20,className:T.SearchIcon}),e.jsx("input",{type:"text",placeholder:p.text.search,onChange:I=>f(I.target.value),value:_})]})}),x?e.jsx("div",{children:"Загрузка..."}):oe.map(I=>e.jsx(Ir,{isSelected:d!==null&&(I==null?void 0:I.value)===(d==null?void 0:d.value),onChange:Xe,option:I},I.value)),oe.length===0&&!x&&e.jsx("div",{children:e.jsx("span",{children:p.text.notFound})}),e.jsx("div",{ref:v})]})})}),r&&e.jsx("p",{className:T.Hint,children:r}),a&&e.jsx("span",{role:"validation-error",className:"error"})]})},Fr=s=>{const{control:t,name:n,rules:r,...o}=s;return e.jsx(ye,{control:t,rules:r,render:({field:{onChange:a,value:c},fieldState:{error:i}})=>e.jsx(ts,{...o,error:i==null?void 0:i.message,onChange:l=>{a(l),o.onChange&&o.onChange(l)},value:c}),name:n})},Vr="_Switch_1pvo5_44",qr="_SwitchControl_1pvo5_58",zr="_SwitchDisabled_1pvo5_86",Ur="_Text_1pvo5_99",$e={Switch:Vr,SwitchControl:qr,SwitchDisabled:zr,Text:Ur},ss=s=>{const{label:t,className:n,value:r,onChange:o,disabled:a=!1,children:c}=s,i=m.useId();return e.jsx("div",{className:n,children:e.jsxs("label",{className:g($e.Switch,{[$e.SwitchDisabled]:a}),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>{o&&o(!r)},disabled:a,id:i}),e.jsx("span",{className:$e.SwitchControl}),e.jsx("label",{htmlFor:i,className:$e.Text,children:t||c})]})})},Wr=s=>{const{control:t,name:n,...r}=s;return e.jsx(ye,{control:t,render:({field:{onChange:o,value:a}})=>e.jsx(ss,{...r,onChange:c=>{o(c),r.onChange&&r.onChange(c)},value:a}),name:n})},F={Input:vr,Checkbox:ur,Switch:Wr,Select:Fr,Area:cr},Zr="_wrapper_1wt5z_44",Xr="_body_1wt5z_53",Qr="_fields_1wt5z_57",Jr="_field_1wt5z_57",Kr="_buttons_1wt5z_67",Yr="_input_1wt5z_73",J={wrapper:Zr,body:Xr,fields:Qr,field:Jr,buttons:Kr,input:Yr},Gr=()=>{const s=U(),t=()=>{s(ke())},{control:n,handleSubmit:r,setValue:o}=ue(),{additionalData:a}=Se(We);m.useEffect(()=>{a&&o("myPrice",a.myPrice)},[a]);const c=i=>{s(yn({additionalData:i})),t()};return e.jsxs("form",{className:J.wrapper,onSubmit:r(c),children:[e.jsx("div",{className:J.header,children:e.jsx("h2",{children:"Настройки текущего прайс листа"})}),e.jsx("div",{className:J.body,children:e.jsx("div",{className:J.fields,children:e.jsxs("div",{className:J.field,children:[e.jsx("span",{children:"Ваша текущая наценка"}),e.jsx(F.Input,{control:n,name:"myPrice",type:"number",className:J.input,placeholder:"Процент наценки"}),e.jsx("span",{children:"%"})]})})}),e.jsxs("div",{className:J.buttons,children:[e.jsx(C,{theme:"primary",type:"submit",children:p.btn.save}),e.jsx(C,{theme:"remove",onClick:t,children:p.btn.close})]})]})},eo="_wrapper_1yodv_44",to={wrapper:eo},so=()=>{const[s,t]=m.useState(5),n=U(),{deletePrice:r}=ne(),{startRefetch:o}=pt(),a=()=>{n(ke())},c=async()=>{try{await r(),o(),a()}catch(i){console.log("При удалении прайслиста возникла ошибка",i)}};return m.useEffect(()=>{const i=setInterval(()=>{t(l=>l<=1?(clearInterval(i),0):l-1)},1e3);return()=>clearInterval(i)},[]),e.jsx(Gt,{cancel:a,agree:c,isDisabled:!!s,children:e.jsxs("div",{className:to.wrapper,children:[e.jsx("span",{children:p.text.acceptDeleteFullPrice}),e.jsx("h2",{children:s})]})})};var de=(s=>(s.DeletePriceItem="deletePriceItem",s.UploadPrice="uploadPrice",s.UploadPriceMutation="uploadPriceMutation",s.DeletePrice="deletePrice",s))(de||{});const no={deletePriceItem:Mn,uploadPrice:Vn,uploadPriceMutation:Gr,deletePrice:so},ro=s=>{const{id:t,name:n}=s,r=Q(),o=U(),a=()=>{o(we({modalType:de.DeletePriceItem,modalProps:{id:t,name:n}}))},c=()=>{r(L.editPriceItem.replace(":id",s.id+"?isEdit"))};return e.jsx(fn,{list:[{...St.edit,cb:c},{...St.delete,cb:a}]})},oo=s=>{const{value:t}=s,n=t==null?void 0:t.toUpperCase();return e.jsx("span",{children:n})},ao=()=>({cells:[{name:p.cell.article,dataAnchor:"article",component:oo},{name:p.cell.name,dataAnchor:"name"},{name:p.cell.brand,dataAnchor:"brand"},{name:p.cell.supplier,dataAnchor:"supplier"},{name:p.cell.deliveryTime,dataAnchor:"delivery_time"},{name:p.cell.quantity,dataAnchor:"quantity"},{name:p.cell.minOrderQty,dataAnchor:"min_order_qty"},{name:p.cell.purchasePrice,dataAnchor:"purchase_price"},{name:p.cell.price,dataAnchor:"price"},{name:"",cellCustomStyle:{width:32},component:s=>ro({name:s.row.name,id:s.row.id})}]}),je={searchBy:[{value:"article",label:p.cell.article},{value:"name",label:p.cell.name}],header:{title:p.title.basePrice},tableConfig:ao},co=(s,t,n)=>{if(s===0)return[];const r=Array.from(Array(s)).map((d,h)=>`${h+1}`),o=Math.ceil(s/t),a=[];let c=0;const i=[];for(let d=0;d<o;d++)a[d]=r.slice(d*t,d*t+t),a[d].includes(n)&&(c=d);const l=a.length>0?a[a.length-1].slice(-1)[0]:0;if(o>1){const d=a[a.length-1].length===1,h=c===a.length-1,u=c<a.length-1?a[c+1][0]:null,x=c>0?a[c-1][a[c-1].length-1]:null;h&&d?(o>2&&i.push("1","..."),i.push(...a[c-1],...a[c])):(x&&i.push("1","...",x),i.push(...a[c]),u&&(i.push(u),u!==l&&i.push("...",l)))}else i.push(...a[c]);return i??[]},io="_wrapper_95kib_44",lo={wrapper:io},ho=4,uo=s=>{const{total:t,page:n,setPage:r,perPage:o,isLoading:a}=s;if(!n||!o)return null;if(t===void 0&&a)return e.jsxs("div",{children:[e.jsx(Z,{width:40,height:40}),e.jsx(Z,{width:40,height:40}),e.jsx(Z,{width:40,height:40}),e.jsx(Z,{width:40,height:40}),e.jsx(Z,{width:40,height:40}),e.jsx(Z,{width:40,height:40}),e.jsx(Z,{width:40,height:40}),e.jsx(Z,{width:40,height:40})]});if(t===void 0||t===0&&!a)return e.jsx("div",{});const c=Math.ceil(t/parseInt(o)),i=l=>a?()=>{}:()=>l();return e.jsxs("div",{className:lo.wrapper,children:[e.jsx(C,{mode:"box",theme:"clear",Icon:qt,disabled:parseInt(n)<=1||a,onClick:i(()=>r(`${parseInt(n)-1}`))}),co(c,ho,n).map((l,d)=>e.jsx(C,{mode:"box",disabled:l==="..."||a,theme:l===n?"primary":"white",onClick:i(()=>r(`${l}`)),children:l},`${l}-${d}`)),e.jsx(C,{mode:"box",theme:"clear",Icon:Hs,disabled:parseInt(n)>=c||a,onClick:i(()=>r(`${parseInt(n)+1}`))})]})},po="_wrapper_7x5tk_44",mo="_Button_7x5tk_56",xo="_notActive_7x5tk_60",ot={wrapper:po,Button:mo,notActive:xo},_o=s=>{const{num:t,isActive:n,setPerPage:r}=s,o=()=>{r(t)};return e.jsx(C,{theme:"empty-accent",onClick:o,className:g(ot.Button,{[ot.notActive]:!n}),children:t})},go=s=>{const{className:t,perPage:n,list:r=Qt,setPerPage:o}=s;return n?e.jsxs("div",{className:ot.wrapper,children:[e.jsx("span",{children:p.text.perPage}),r.map(a=>e.jsx(_o,{num:parseInt(a),setPerPage:o,isActive:n===a},a))]}):null},jo="_wrapper_1yd5r_44",Co={wrapper:jo},fo=s=>{const{page:t,perPage:n,perPageList:r,total:o,isLoading:a}=s,[c,i]=me(),l=h=>{i(u=>({...u,page:h}))},d=h=>{i(u=>({...u,perPage:h,page:"1"}))};return e.jsxs("div",{className:Co.wrapper,children:[e.jsx(uo,{total:o,page:t,perPage:n,setPage:l,isLoading:a}),e.jsx(go,{perPage:n,list:r,setPerPage:d})]})};function wo(s,t){const[n,r]=m.useState(s),[o,a]=m.useState(s);return m.useEffect(()=>{const c=setTimeout(()=>{a(n)},t);return()=>{clearTimeout(c)}},[n,t]),[o,n,r]}const bo="_SearchContainer_15cl4_44",vo="_SearchIcon_15cl4_66",Pt={SearchContainer:bo,SearchIcon:vo},yo=s=>e.jsxs("div",{className:Pt.SearchContainer,children:[e.jsx("div",{className:Pt.SearchIcon,children:e.jsx(Zt,{width:20,height:20})}),e.jsx("input",{type:"text",placeholder:p.text.search,value:s.searchValue,onChange:t=>s.setSearchValue(t.target.value)}),s.children]}),ko="_SearchContainer_9o0l2_44",So="_SearchIcon_9o0l2_66",Io="_SearchSelect_9o0l2_74",No="_contextMenu_9o0l2_92",Po="_Option_9o0l2_103",Lo="_OptionIcon_9o0l2_116",Ae={SearchContainer:ko,SearchIcon:So,SearchSelect:Io,contextMenu:No,Option:Po,OptionIcon:Lo},$o=s=>{const{initialValues:t,options:n}=s,[r,o]=m.useState(!1),[a,c]=m.useState(Array.isArray(n)&&n.length>0?n[0].value:""),[i,l,d]=wo(t.searchValue,500),[h,u]=me(),x=m.useRef(0),_=m.useRef(0),{refs:f,floatingStyles:y,context:w}=Re({open:r,onOpenChange:o,whileElementsMounted:Fe,placement:"bottom-end",middleware:[it(5)]}),b=lt(w,{event:"mousedown",keyboardHandlers:!1}),v=Ht(w),{getReferenceProps:M,getFloatingProps:H}=Ve([b,v]);return m.useEffect(()=>{_.current>0&&u(k=>({...k,q:i,page:1})),_.current=1},[i]),m.useEffect(()=>{x.current>0&&u(k=>({...k,searchBy:a,page:1})),x.current=1},[a]),e.jsx(yo,{searchValue:l,setSearchValue:d,children:Array.isArray(n)&&n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ae.SearchSelect,ref:f.setReference,...M(),children:e.jsxs("div",{children:[e.jsx("span",{children:n.filter(k=>k.value===a)[0].label}),e.jsx(Vt,{width:20,height:20})]})}),r&&e.jsx(qe,{id:"dropdown",children:e.jsx(ze,{context:w,modal:!1,children:e.jsx("div",{className:Ae.contextMenu,ref:f.setFloating,style:y,...H(),children:n.map(k=>e.jsxs("div",{role:"option",onClick:()=>c(k.value),className:Ae.Option,children:[k.value===a&&e.jsx(ht,{className:Ae.OptionIcon,color:E.main,width:16,height:16}),e.jsx("span",{children:k.label})]},k.value))})})})]})})},ns=m.createContext(null),Ao=s=>{const[t,n]=m.useState(!1);return e.jsx(ns.Provider,{value:{isUpdate:t,setIsUpdate:n},children:s.children})},rs=()=>m.useContext(ns),To="_Option_2w7z9_44",Mo="_icon_2w7z9_54",Lt={Option:To,icon:Mo},Eo=s=>{const{option:t}=s,[n,r]=me(),o=()=>{r(a=>({...a,page:1,[t.paramsName]:null}))};return e.jsxs("div",{className:Lt.Option,children:[e.jsxs("span",{children:[t==null?void 0:t.name," - ",t==null?void 0:t.text]}),e.jsx("div",{onClick:o,className:Lt.icon,children:e.jsx(zt,{width:14,height:14})})]})},Bo="_SelectedFilterOptions_1cm6i_44",Oo={SelectedFilterOptions:Bo},Do=s=>{const{filterConfig:t}=s,n=rs(),r=m.useMemo(()=>t==null?void 0:t.flatMap(a=>{if(a.elementType==="date"||a.elementType==="time")return a.fields.map(c=>{var i;return c.defaultValue?{name:`${a.label} ${c.label}`,text:a.elementType==="time"?(i=c.defaultValue)==null?void 0:i.replace("-",":"):c.defaultValue,paramsName:c.name}:null});if(!a.defaultValue)return null;if(a.elementType==="select"){const c=a.options.find(i=>i.value===a.defaultValue);return{name:a.label,text:c==null?void 0:c.label,paramsName:a.name}}return a.elementType==="checkBox"||a.elementType==="switcher"?a.defaultValue?{name:a.label,text:a.defaultValue?"Да":"Нет",paramsName:a.name}:null:{name:a.label,text:a.defaultValue,paramsName:a.name}}).filter(Boolean),[t]);return m.useEffect(()=>{n&&n.setIsUpdate(!0)},[r]),e.jsx("div",{className:Oo.SelectedFilterOptions,children:r==null?void 0:r.map((o,a)=>e.jsx(Eo,{option:o},a))})},Ho=s=>{const{value:t,label:n,name:r}=s,[o,a]=me(),c=l=>{a(d=>({...d,[r]:l,page:1}))},i=t==="true";return e.jsx(ss,{onChange:c,value:i,children:n})},Ro=()=>{const[s,t]=m.useState(window.innerHeight),[n,r]=m.useState(window.innerWidth);return m.useEffect(()=>{const o=()=>{t(window.innerHeight),r(window.innerWidth)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),{height:s,width:n}},Fo=s=>{const t=m.useRef(null),[n,r]=m.useState(null),{width:o,height:a}=Ro(),c=rs();m.useEffect(()=>{var d;if(t.current&&!s.height){const h=(d=t.current)==null?void 0:d.getBoundingClientRect();r(h.top)}c&&c.setIsUpdate(!1)},[t,c,o,a]);const i=s.hasPagination?101:25,l=s.height??window.innerHeight-(n||0)-i;return e.jsx("div",{ref:t,children:e.jsx(vs.Scrollbars,{style:{height:`${l}px`},children:s.children})})},Vo="_Separator_1dyvu_44",qo={Separator:Vo},mt=s=>e.jsx("div",{className:g(qo.Separator,s.className),style:s.style}),zo="_wrapper_hvoru_44",Uo="_separator_hvoru_53",Wo="_Section_hvoru_57",Zo="_title_hvoru_63",Xo="_left_hvoru_68",Qo="_right_hvoru_73",Jo="_SectionFooter_hvoru_77",z={wrapper:zo,separator:Uo,Section:Wo,title:Zo,left:Xo,right:Qo,SectionFooter:Jo},A=s=>{const{children:t,className:n,title:r,isSeparator:o}=s;return e.jsxs("div",{className:z.Container,children:[e.jsxs("div",{className:g(z.Section,n||""),children:[e.jsx("div",{className:z.left,children:e.jsx("span",{children:r})}),e.jsx("div",{className:z.right,children:t})]}),o&&e.jsx(mt,{className:z.separator})]})};A.Header=s=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:z.SectionHeader,children:s.title?e.jsx(A.Title,{title:s.title,isBack:s.isBack}):s.children?s.children:null}),e.jsx(mt,{})]});A.Title=s=>{const t=Q();return e.jsxs("div",{className:z.wrapper,children:[s.isBack&&e.jsx(C,{mode:"box",theme:"clear",onClick:()=>t(-1),children:e.jsx(qt,{})}),e.jsx("span",{className:z.title,children:s.title}),e.jsx("div",{children:s.children})]})};A.Footer=s=>e.jsxs(e.Fragment,{children:[e.jsx(mt,{}),e.jsx("div",{className:z.SectionFooter,children:e.jsx("div",{children:s.children})})]});const os=(s,t,n)=>{if(t.length===0)return s;const r=t.split("."),o=r.shift();return o&&s[o]?os(s[o],r.join("."),n):n},Ko="_tr_12l8o_44",Yo="_td_12l8o_47",Go="_trMessage_12l8o_57",be={tr:Ko,td:Yo,trMessage:Go},ea=s=>{const{row:t,cellField:n}=s;let r;n.dataAnchor?r=os(t,n.dataAnchor,""):r=t;const o=n.component,a=n.valueDecorator?n.valueDecorator(r):r;return e.jsx("td",{className:be.td,style:n.cellCustomStyle,children:o?e.jsx(o,{value:a,row:t}):e.jsx("div",{children:typeof a=="string"?a:""})})},ta=s=>{const{className:t,structureConfig:n,row:r}=s;return e.jsx("tr",{className:g(be.tr,t),children:n.map((o,a)=>e.jsx(ea,{cellField:o,row:r},`${a}`))})},sa=s=>{const{items:t,structureConfig:n,isLoading:r}=s;return e.jsxs("tbody",{children:[t==null?void 0:t.map(o=>e.jsx(ta,{structureConfig:n,row:o},o.id)),(t==null?void 0:t.length)===0&&!r&&e.jsx("tr",{className:g(be.tr,be.trMessage),children:e.jsx("td",{className:be.td,colSpan:n.length,children:e.jsx("span",{children:p.text.dataNotFound})})})]})},na="_tr_18bwt_44",ra="_th_18bwt_47",oa="_sort_18bwt_56",aa="_arrow_18bwt_62",ca="_isRevert_18bwt_66",ve={tr:na,th:ra,sort:oa,arrow:aa,isRevert:ca},ia=s=>{const{element:t,sortHandler:n,direction:r,sort:o}=s,a=o===t.sort||o===`-${t.sort}`,c=t.name||"";return e.jsx("th",{className:ve.th,style:t.cellTheadCustomStyle,children:t.sort?e.jsx("div",{className:g(ve.sort,{[ve.isRevert]:a&&r==="down"}),onClick:()=>n(t.sort),children:e.jsx("span",{children:c})}):e.jsx("span",{children:c})})},la=s=>{const{structureConfig:t}=s,[{sort:n},r]=me(),o=a=>{(n===void 0||a!==n)&&r(c=>({...c,sort:a})),n===a&&r(c=>({...c,sort:`-${a}`})),n===`-${a}`&&r(c=>({...c,sort:""}))};return e.jsx("thead",{className:ve.TableHead,children:e.jsx("tr",{className:ve.tr,children:t==null?void 0:t.map((a,c)=>e.jsx(ia,{element:a,sortHandler:o,direction:n!=null&&n.includes("-")?"up":"down",sort:n},c))})})},da="_Table_63td9_44",ha="_TableLoading_63td9_49",$t={Table:da,TableLoading:ha},ua=s=>{const{data:t,tableConfig:n,isLoading:r}=s;return e.jsxs("table",{className:g($t.Table,{[$t.TableLoading]:r}),children:[e.jsx(la,{structureConfig:n.cells}),e.jsx(sa,{items:t,structureConfig:n.cells,isLoading:r})]})},pa=m.lazy(()=>dt(()=>import("./Filter-B3dguq9S.js"),__vite__mapDeps([4,1,5]))),ma=s=>{const{className:t,config:n,isShowClose:r}=s,[o,a]=m.useState(!1),c=()=>a(i=>!i);return e.jsxs(e.Fragment,{children:[e.jsx(C,{Icon:Us,theme:"light",onClick:c,children:p.text.filter}),e.jsx(ys,{initial:!0,children:o&&e.jsx(pa,{config:n,onClose:c,isShowClose:r,className:t})})]})},xa=s=>{const{title:t,tableConfig:n,children:r,tableData:o,total:a,isLoading:c,page:i,perPage:l,perPageList:d,searchValue:h,searchBy:u,options:x,switchConfig:_,filterConfig:f}=s,y=!!(i||l);return e.jsxs(pe,{size:"l",children:[e.jsxs(se,{filledHeight:!0,children:[e.jsx(A.Header,{title:t,children:r}),h!==void 0&&u!==void 0&&e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{style:{flex:"1 0 auto"},children:e.jsx($o,{initialValues:{searchValue:h,searchBy:u},options:x})}),f&&e.jsx(ma,{config:f}),_&&e.jsx("div",{style:{padding:"8px 0 0 0",maxWidth:_.containerWidth||180},children:e.jsx(Ho,{..._})})]})}),e.jsxs(Ao,{children:[f&&e.jsx("div",{children:e.jsx(Do,{filterConfig:f})}),e.jsx("div",{children:e.jsx(Fo,{hasPagination:y,children:e.jsx("div",{children:e.jsx(ua,{data:o,tableConfig:n,isLoading:c})})})})]})]}),y&&e.jsx("div",{children:e.jsx(fo,{page:i,perPage:l,perPageList:d,total:a,isLoading:c})})]})},_a=s=>{const{children:t}=s;return e.jsx(pe,{size:"m",children:e.jsx(m.Suspense,{children:t})})},ga="_wrapper_1ooiu_44",ja={wrapper:ga},Ca=()=>{const s=Ue(),t=()=>{s(we({modalType:de.DeletePrice}))};return e.jsx(A.Title,{title:je.header.title,children:e.jsxs("div",{className:ja.wrapper,children:[e.jsx(fe,{to:L.createPriceItem,children:e.jsx(C,{Icon:he,children:p.btn.create})}),e.jsx(fe,{to:L.uploadPrice,children:e.jsx(C,{Icon:he,children:p.btn.xlsx})}),e.jsx(fe,{to:L.downloadPrice,children:e.jsx(C,{Icon:Ut,theme:"light-clear",children:p.btn.xlsx})}),e.jsx(C,{Icon:ut,onClick:t,theme:"remove",children:p.btn.delete})]})})},fa=()=>{const{page:s,limit:t,q:n,searchBy:r}=Kt({limit:{rules:["hasInArray"],safeValue:"20",values:["20"]},searchBy:{rules:["hasInArray"],safeValue:je.searchBy[0].value,values:je.searchBy.map(d=>d.value)}}),o=r,{query:a,isLoading:c,data:i}=ne(),l={page:parseInt(s,10),limit:parseInt(t,10),searchBy:o,q:n};return m.useEffect(()=>{a(l)},[s,n]),pt({query:a,queryParams:l}),e.jsx(xa,{searchValue:n,page:s,perPage:t,perPageList:["20"],total:(i==null?void 0:i.totalItems)||0,searchBy:r,tableConfig:je.tableConfig(),tableData:i==null?void 0:i.priceList,options:je.searchBy,isLoading:c,children:e.jsx(Ca,{})})};function et(s,t,n){return t?n:{...n,[s]:{type:"required",message:p.rules.required}}}function K(s,t,n,r){return typeof t!="string"?{...n,[s]:{type:"typeError",message:p.rules.incorrectSymbol}}:t.length>r?{...n,[s]:{type:"maxLength",message:p.rules.maxLength}}:n}function At(s,t,n){return isNaN(t)?{...n,[s]:{type:"typeError",message:p.rules.incorrectSymbol}}:n}const wa=async s=>{let t={};return t=et("article",s.article,t),t=et("name",s.name,t),t=et("company_id",s,t),t=K("article",s.article,t,255),t=K("name",s.name,t,255),t=K("brand",s.brand,t,255),t=K("delivery_time",s.delivery_time,t,255),t=K("min_order_qty",s.min_order_qty,t,255),t=K("quantity",s.quantity,t,255),t=K("supplier",s.supplier,t,255),t=At("price",s.price,t),t=At("purchase_price",s.purchase_price,t),{values:s,errors:t}},ba="_wrapper_hxk6b_44",va="_body_hxk6b_48",ya="_buttons_hxk6b_54",tt={wrapper:ba,body:va,buttons:ya},ka={article:"",name:"",brand:"",delivery_time:"",min_order_qty:"",quantity:"",supplier:"",price:"",purchase_price:""},Sa=s=>{if(!s)return ka;const{purchase_price:t,price:n,delivery_time:r,name:o,min_order_qty:a,brand:c,article:i,quantity:l,supplier:d}=s;return{purchase_price:t,price:n,delivery_time:r,name:o,supplier:d,quantity:l,article:i,brand:c,min_order_qty:a}},Ia=[{name:"article",label:p.label.article},{name:"name",label:p.label.name},{name:"brand",label:p.label.brand},{name:"delivery_time",label:p.label.deliveryTime},{name:"min_order_qty",label:p.label.minOrderQty},{name:"quantity",label:p.label.quantity},{name:"supplier",label:p.label.supplier},{name:"purchase_price",label:p.label.purchasePrice},{name:"price",label:p.label.price}],Na=s=>{const{initialValues:t,id:n}=s,{control:r,handleSubmit:o}=ue({defaultValues:Sa(t),resolver:wa}),a=Q(),{createElement:c,updateElement:i}=ne(),l=async d=>{try{(n?await i(d,n):await c(d))&&a(L.prices)}catch(h){console.log("Ошибка авторизации",h)}};return e.jsx(se,{children:e.jsx("form",{onSubmit:o(l),children:e.jsxs("div",{className:tt.wrapper,children:[e.jsx(A.Header,{children:e.jsx(A.Title,{title:n?p.title.editPriceItem:p.title.creatNewPriceItem,isBack:!0})}),e.jsx(A,{isSeparator:!0,title:p.title.priceElement,children:e.jsx("div",{className:tt.body,children:Ia.map(({name:d,label:h})=>e.jsx(F.Input,{control:r,name:d,label:h},d))})}),e.jsx(A.Footer,{children:e.jsxs("div",{className:tt.buttons,children:[e.jsx(C,{theme:"white",children:p.btn.cancel}),e.jsx(C,{type:"submit",Icon:n?Zs:he,children:n?p.btn.save:p.btn.create})]})})]})})})},Tt=()=>{const{id:s}=Ot(),{dataById:t,queryById:n,isLoadingById:r}=ne({id:s});m.useEffect(()=>{s&&n()},[s]);const a=location.pathname===L.createPriceItem||location.search.search("isEdit")!==-1;return e.jsx(_a,{children:a&&!r&&e.jsx(Na,{initialValues:t,id:Number(s)})})},as={article:"Артикул",name:"Наименование",brand:"Бренд",delivery_time:"Время поставки",min_order_qty:"Минимальный заказ",quantity:"Количество",supplier:"Поставщик",purchase_price:"Закупочная цена",price:"Цена"},cs=()=>["article","name","supplier","brand","delivery_time","min_order_qty","quantity","purchase_price","price"].map(t=>({value:t,label:as[t]||t})),Pa="_info_body_wnv1v_44",La="_info_wnv1v_44",$a="_item_wnv1v_56",Aa="_active_wnv1v_66",Te={info_body:Pa,info:La,item:$a,active:Aa},Me=[{text:"Артикул",value:"article",id:1},{text:"Поставщик",value:"supplier",id:2},{text:"Наименование",value:"name",id:3}],Ta=s=>{const{isSupplierSelected:t,isNameSelected:n,isArticleSelected:r}=s,[o,a]=m.useState([]);return m.useEffect(()=>{const c=[];r&&c.push(Me.findIndex(i=>i.value==="article")),t&&c.push(Me.findIndex(i=>i.value==="supplier")),n&&c.push(Me.findIndex(i=>i.value==="name")),a(c)},[r,n,t]),e.jsxs("div",{className:Te.info,children:[e.jsx("div",{children:e.jsx("h3",{children:"Необходимо выбрать обязательные данные"})}),e.jsx("div",{className:Te.info_body,children:Me.map((c,i)=>e.jsx("div",{className:g(Te.item,{[Te.active]:o.includes(i)}),children:c.text},c.id))})]})},Ma="_wrapper_jitgz_44",Ea="_body_jitgz_49",Ba="_header_jitgz_65",Oa="_header_supplier_jitgz_72",Da="_button_jitgz_76",Ha="_buttons_jitgz_80",Ra="_custom_file_upload_jitgz_87",Y={wrapper:Ma,body:Ea,header:Ba,header_supplier:Oa,button:Da,buttons:Ha,custom_file_upload:Ra},Fa="_loaderContainer_1h8kh_44",Va="_loader_1h8kh_44",qa="_spin_1h8kh_1",za="_progressText_1h8kh_59",st={loaderContainer:Fa,loader:Va,spin:qa,progressText:za},Ua=s=>{const{progress:t}=s;return e.jsxs("div",{className:st.loaderContainer,children:[e.jsx("div",{className:st.loader}),t!==void 0&&e.jsxs("div",{className:st.progressText,children:[t,"%"]})]})},Wa=()=>{const[s,t]=m.useState([]),[n,r]=m.useState([]),[o,a]=m.useState([]),[c,i]=m.useState(0),[l,d]=m.useState(!1),h=Q(),u=U(),{additionalData:x}=Se(We),_=x==null?void 0:x.myPrice,{watch:f,control:y}=ue(),w=f("supplier"),b=o.some(j=>j.value==="article"),v=o.some(j=>j.value==="name"),M=o.some(j=>j.value==="supplier")||w,H=!b||!v||!M,{bulkUpdatePrice:k}=ne(),W=()=>{u(we({modalType:de.UploadPriceMutation}))},xe=()=>{h(L.prices),u(kt())},re=j=>{var S;const P=(S=j.target.files)==null?void 0:S[0];if(P){const N=new FileReader;N.onload=ae=>{var jt;const Je=new Uint8Array((jt=ae.target)==null?void 0:jt.result),O=ks(Je,{type:"array"}),_e=O.SheetNames[0],ls=O.Sheets[_e];let ce=Be.sheet_to_json(ls,{header:1});ce.length>0&&ce[0].every(ie=>ie==="")&&(ce=ce.slice(1));const _t=ce[0],ds=_t.filter(Boolean).map(ie=>({value:null,label:null}));a(ds);const gt=ce.map(ie=>ie.map(Ne=>Ne!=null?String(Ne):"")).slice(1).map(ie=>ie.filter((Ne,hs)=>!!_t[hs]));r(gt.slice(0,5)),t(gt)},N.readAsArrayBuffer(P)}},B=(j,P)=>{a(S=>{const N=[...S];return N.splice(j,1,P),N})},Ze=async()=>{d(!0);const j=o.map(S=>S==null?void 0:S.value),P=s.map(S=>j.reduce((N,ae,Je)=>{const O=S[Je];if(ae&&(N[ae]=O),ae==="purchase_price"&&_){const _e=parseFloat(O==null?void 0:O.replace(/[^\d.-]/g,""))||0;N.purchase_price=String(_e),N.price=String(_e+_e*(_/100))}return w&&(N.supplier=w),ae==="article"&&(N.article=typeof O=="string"?O.replace(/\s+/g,""):""),N.min_order_qty=O>1?O:1,N},{article:void 0,brand:void 0,delivery_time:void 0,min_order_qty:void 0,name:void 0,price:void 0,purchase_price:void 0,quantity:void 0,supplier:void 0})).filter(S=>Object.keys(S).length>0);try{await k(P)&&u(we({modalType:de.UploadPrice,modalProps:{message:p.notification.xlsxSuccess,type:"successful"}}))}catch(S){u(we({modalType:de.UploadPrice,modalProps:{message:p.notification.uploadXlsx,type:"error"}})),console.log("Ошибка загрузки прайс листа из ексель файла",S)}finally{u(kt()),d(!1)}},Xe=cs(),Ie=o.map(j=>j==null?void 0:j.value),Qe=Xe.map(j=>Ie.includes(j==null?void 0:j.value)?{...j,disabled:!0}:j),oe=o.find(j=>j.value==="purchase_price"),I=n.length<1;return m.useEffect(()=>{oe&&W()},[oe]),l?e.jsx(Ua,{progress:c}):e.jsxs("div",{className:Y.wrapper,children:[e.jsx(Ta,{isArticleSelected:b,isNameSelected:v,isSupplierSelected:M}),e.jsxs("div",{className:Y.header,children:[e.jsx(F.Input,{name:"supplier",control:y,label:p.label.supplier,className:Y.header_supplier,placeholder:p.placeHolder.supplier}),I&&e.jsxs("label",{className:Y.custom_file_upload,children:["Добавить xls документ",e.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:re})]}),_&&e.jsxs("span",{children:["Наценка на текущий прайс = +",_," %"]}),oe&&e.jsx(C,{onClick:W,theme:"primary",className:Y.button,children:"настройки"})]}),n.length>0&&e.jsxs("div",{className:Y.body,children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:o.map((j,P)=>e.jsx("th",{children:e.jsx(ts,{onChange:S=>B(P,S),value:o[P],options:Qe})},P))})}),e.jsx("tbody",{children:n.map((j,P)=>e.jsx("tr",{children:o.map((S,N)=>e.jsx("td",{children:j[N]},N))},P))})]}),e.jsxs("div",{className:Y.buttons,children:[e.jsxs(C,{onClick:Ze,disabled:H,children:[" ",p.btn.save]}),e.jsxs(C,{onClick:xe,theme:"clear",children:[" ",p.btn.cancel]})]})]})]})},Za=()=>e.jsx(pe,{size:"l",children:e.jsxs(se,{filledHeight:!0,children:[e.jsx(A.Header,{children:e.jsx(A.Title,{title:p.title.uploadingXLSXData,isBack:!0})}),e.jsx(Wa,{})]})}),Xa="_wrapper_1myfs_44",Qa="_field_1myfs_52",Ja="_buttons_1myfs_58",nt={wrapper:Xa,field:Qa,buttons:Ja},Ka=s=>{const{control:t,usedHeaders:n}=s,{fields:r,append:o,remove:a}=Ss({control:t,name:"headers"}),c=()=>o(null),i=h=>a(h),l=cs(),d=m.useMemo(()=>{const h=n==null?void 0:n.map(u=>u==null?void 0:u.value).filter(Boolean);return l.filter(u=>!(h!=null&&h.includes(u.value)))},[l,n]);return e.jsxs("div",{className:nt.wrapper,children:[r.map((h,u)=>e.jsxs("div",{className:nt.field,children:[e.jsxs("span",{children:[u+1," "]}),e.jsx(F.Select,{control:t,name:`headers.${u}`,options:d}),e.jsx("div",{children:e.jsx(C,{onClick:()=>i(u),Icon:ut,theme:"empty-accent"})})]},h.id)),e.jsx("div",{onClick:c,className:nt.buttons,children:e.jsx(C,{theme:"light-clear",Icon:he,children:"Добавить поле"})})]})},Ya="_form_1v240_44",Ga={form:Ya},ec=(s,t)=>{const r=((i,l)=>i.map(d=>{const h={};return l.forEach(u=>{var x;if(u in d){if(u==="article")return h[u]=(x=d[u])==null?void 0:x.toUpperCase();h[u]=d[u]}}),h}))(s,t),o=t.reduce((i,l)=>(i[l]=as[l],i),{}),a=Be.json_to_sheet([o,...r],{header:t,skipHeader:!0}),c=Be.book_new();Be.book_append_sheet(c,a,"Sheet1"),Is(c,"Data.xlsx")},tc=()=>{const{control:s,watch:t,handleSubmit:n}=ue({}),r=t().headers,{query:o}=ne(),a=Q(),c=async i=>{var l;try{const d=(l=i==null?void 0:i.headers)==null?void 0:l.map(u=>u.value),h=await o();ec(h.priceList,d),a(L.prices)}catch(d){console.log("Ошибка выгрузки данных в xlsx",d)}};return e.jsx(pe,{size:"m",children:e.jsxs(se,{filledHeight:!0,children:[e.jsx(A.Header,{children:e.jsx(A.Title,{title:p.title.downloadingXLSXData,isBack:!0})}),e.jsx(Ka,{control:s,usedHeaders:r}),e.jsx("form",{onSubmit:n(c),className:Ga.form,children:e.jsx(C,{theme:"primary",type:"submit",children:"Download"})})]})})},Oe=[{path:L.mainPage,Component:cn,name:"Главная",inMenu:!0,Icon:e.jsx(Js,{width:20,height:20})},{path:L.prices,Component:fa,name:"Прайс",inMenu:!0,Icon:e.jsx(Qs,{width:20,height:20})},{path:L.createPriceItem,Component:Tt},{path:L.editPriceItem,Component:Tt},{path:L.uploadPrice,Component:Za},{path:L.downloadPrice,Component:tc}],sc=()=>e.jsxs(Ns,{children:[Oe==null?void 0:Oe.map(s=>e.jsx(Ct,{path:s.path,element:e.jsx(tn,{path:s.path??"",children:e.jsx(m.Suspense,{fallback:e.jsx(Xt,{}),children:s.Component&&e.jsx(s.Component,{})})})},s.path)),e.jsx(Ct,{path:"*",element:e.jsx(Ds,{})})]}),nc="_logout_1naqs_44",rc="_Aside_1naqs_66",oc="_opened_1naqs_83",ac="_childLink_1naqs_86",cc="_Link_1naqs_86",ic="_IconRight_1naqs_91",lc="_submenu_1naqs_95",dc="_IconLeft_1naqs_146",D={logout:nc,Aside:rc,opened:oc,childLink:ac,Link:cc,IconRight:ic,submenu:lc,IconLeft:dc},hc=s=>{const{path:t,name:n,Icon:r,items:o,defaultParams:a}=s,[c,i]=m.useState(!1),l=()=>i(d=>!d);return e.jsx("li",{children:Array.isArray(o)&&o.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:l,className:D.Link,children:[e.jsx("div",{className:D.IconLeft,children:r}),e.jsx("span",{children:n}),e.jsxs("div",{className:D.IconRight,children:[e.jsx(he,{color:E.text4,width:16,height:16}),c?e.jsx(Ut,{color:E.text4,width:16,height:16}):e.jsx(he,{color:E.text4,width:16,height:16})]})]}),c&&e.jsx("ul",{className:D.submenu,children:o.map(d=>e.jsx("li",{children:e.jsx(fe,{to:d.path,className:D.childLink,theme:"clear",children:e.jsx("span",{children:d.name})})},d.path))})]}):e.jsxs(fe,{to:t+(a||""),className:D.Link,theme:"clear",children:[e.jsx("div",{className:D.IconLeft,children:r}),e.jsx("span",{children:n})]})})},uc=s=>{const{isOpen:t,logout:n}=s;return e.jsxs("aside",{className:g(D.Aside,{[D.opened]:t}),children:[e.jsx("nav",{children:e.jsx("ul",{children:Oe.map(({Icon:r,...o},a)=>e.jsx(hc,{Icon:r,...o},`${a}-${o.path}-${o.name}`))})}),e.jsxs("button",{className:D.logout,onClick:n,children:[e.jsx("div",{className:D.IconLeft,children:e.jsx(Ys,{width:20,height:20})}),e.jsx("span",{children:"Выход"})]})]})},pc="_Burger_1u9tt_44",mc="_Opened_1u9tt_68",Mt={Burger:pc,Opened:mc},xc=s=>{const{isOpen:t,toggle:n}=s;return e.jsxs("button",{onClick:n,className:g(Mt.Burger,{[Mt.Opened]:t}),children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})},_c="_Header_hjak7_44",gc="_wrapper_hjak7_55",jc="_headerTitle_hjak7_61",Cc="_vSeparator_hjak7_69",rt={Header:_c,wrapper:gc,headerTitle:jc,vSeparator:Cc},fc=s=>{const{isOpen:t,toggle:n}=s;return e.jsx("header",{className:rt.Header,children:e.jsxs("div",{className:rt.wrapper,children:[e.jsx(xc,{isOpen:t,toggle:n}),e.jsx("span",{className:rt.headerTitle,children:p.title.headerTitle})]})})},wc="_Layout_rb4e1_44",bc={Layout:wc},vc=s=>{const[t,n]=m.useState(!1),r=()=>n(o=>!o);return e.jsxs("div",{className:bc.Layout,children:[e.jsx(fc,{isOpen:t,toggle:r}),e.jsx(uc,{isOpen:t,logout:s.logout}),e.jsx("div",{style:{transition:"all .25s",paddingLeft:t?"var(--sidebar-width--open)":"var(--sidebar-width)"},children:s.children})]})},yc={email:"",password:""};function kc(s,t,n){return t?n:{...n,[s]:{type:"required",message:p.rules.required}}}const Sc=async s=>{let t={};return t=Object.entries(s).reduce((n,[r,o])=>kc(r,o,n),{}),{values:s,errors:t}},Ic="_wrapper_tm7g2_44",Nc="_form_tm7g2_49",Pc="_fields_tm7g2_56",Lc="_buttons_tm7g2_62",$c="_buttons_actions_tm7g2_69",Ac="_forgot_tm7g2_75",R={wrapper:Ic,form:Nc,fields:Pc,buttons:Lc,buttons_actions:$c,forgot:Ac},Tc=(s,t)=>{De(null,"accessToken",s,{maxAge:60*15,path:"/",sameSite:"Strict"}),De(null,"refreshToken",t,{maxAge:60*60*24*7,path:"/",sameSite:"Strict"})},is=s=>{const{response:t}=s;if(!t||!t.data)return console.log("Authorization failed: No response data"),null;const{accessToken:n,refreshToken:r,email:o,id:a}=t.data;return!n||!r||!o||!a?(console.log("Authorization failed: Incomplete data"),null):(Tc(n,r),{accessToken:n,refreshToken:r,email:o,id:a})},Mc=s=>{const{goToRegistration:t}=s,{control:n,handleSubmit:r,formState:{isSubmitting:o}}=ue({defaultValues:yc,resolver:Sc}),{logIn:a}=Ft(),c=Ue(),i=Q(),l=async d=>{try{const h=await a(d),{id:u,email:x}=is({response:h});c(Ce.login({isAuth:!0,me:{id:u,email:x}})),i("/")}catch(h){console.log("Ошибка авторизации",h)}};return e.jsx(se,{className:R.wrapper,children:e.jsxs("form",{onSubmit:r(l),className:R.form,noValidate:!0,children:[e.jsx("h2",{children:p.title.auth}),e.jsxs("div",{className:R.fields,children:[e.jsx("div",{children:e.jsx(F.Input,{control:n,name:"email",type:"email",inputMode:"email",label:p.field.email})}),e.jsx("div",{children:e.jsx(F.Input,{control:n,name:"password",label:p.field.password,type:"password"})})]}),e.jsx("div",{className:R.buttons,children:e.jsxs("div",{className:R.buttons_actions,children:[e.jsx(C,{type:"button",theme:"light",loading:o,onClick:t,children:p.btn.register}),e.jsx(C,{type:"submit",loading:o,Icon:Ks,children:p.btn.signIn})]})})]})})},Ec="_Sign_131b7_44",Bc={Sign:Ec},Oc={companyName:"",email:"",passwordFirst:"",passwordSecond:""};function Dc(s,t,n){return t?n:{...n,[s]:{type:"required",message:p.rules.required}}}const Hc=async s=>{let t={};return t=Object.entries(s).reduce((n,[r,o])=>Dc(r,o,n),{}),{values:s,errors:t}},xt=class xt{};xt.companyRegistration=t=>$.post("/auth/create-company",t);let at=xt;const Rc=()=>({creatNewCompany:at.companyRegistration}),Fc=s=>{const{goToLogIn:t,login:n}=s,{control:r,handleSubmit:o,watch:a,setError:c,formState:{isSubmitting:i}}=ue({defaultValues:Oc,resolver:Hc}),{creatNewCompany:l}=Rc(),d=Ue(),h=Q(),u=async f=>{if(x&&_&&x!==_)return c("passwordSecond",{message:"Пароли не совпадают"});const y={email:f.email,password:f.passwordFirst,companyName:f.companyName};try{const w=await l(y),{id:b,email:v}=is({response:w});d(Ce.login({isAuth:!0,me:{id:b,email:v}})),h("/")}catch(w){console.log("Ошибка создания пользователя",w)}},x=a("passwordFirst"),_=a("passwordSecond");return e.jsx(se,{className:R.wrapper,children:e.jsxs("form",{onSubmit:o(u),className:R.form,noValidate:!0,children:[e.jsx("h2",{children:p.title.register}),e.jsxs("div",{className:R.fields,children:[e.jsx(F.Input,{control:r,name:"companyName",label:p.field.companyName}),e.jsx(F.Input,{control:r,name:"email",type:"email",inputMode:"email",label:p.field.email}),e.jsx(F.Input,{control:r,name:"passwordFirst",label:p.field.password,type:"password"}),e.jsx(F.Input,{control:r,name:"passwordSecond",label:p.field.repeatPassword,type:"password"})]}),e.jsx("div",{className:R.buttons,children:e.jsxs("div",{className:R.buttons_actions,children:[e.jsx(C,{type:"submit",loading:i,children:p.btn.register}),e.jsx(C,{theme:"light",onClick:t,loading:i,children:p.btn.back})]})})]})})},Vc={initial:{opacity:0,transform:"translateY(-10px)"},animate:{opacity:1,transform:"translateY(0)"},exit:{opacity:0,transform:"translateY(10px)"},transition:{duration:.5},style:{width:"100%"}},qc=s=>{const{login:t}=s,{code:n}=Kt({code:{rules:[]}}),[r,o]=m.useState(n?"newPassword":"logIn"),a=()=>o("registration"),c=()=>o("recovery"),i=()=>o("logIn"),l=()=>o("blocked"),d=h=>{o("error"),console.log(h)};return e.jsx(pe,{children:e.jsxs("div",{className:Bc.Sign,children:[r==="logIn"&&e.jsx(Mc,{goToError:d,goToRecovery:c,goToRegistration:a,goToBlock:l,animationScreen:Vc,login:t}),r==="registration"&&e.jsx(Fc,{login:t,goToLogIn:i})]})})},zc="_x_nvcn5_44",Et={x:zc,"theme-filled":"_theme-filled_nvcn5_59"},Uc=s=>{const{className:t,onClick:n,theme:r="main",style:o}=s;return e.jsx("button",{style:o,type:"button",onClick:n,className:g(Et.x,{[Et[`theme-${r}`]]:r},t),children:e.jsx(zt,{width:20,height:20})})},Wc="_modal_h4t3j_44",Zc="_show_h4t3j_57",Xc="_close_h4t3j_64",Qc="_container_h4t3j_74",Ee={modal:Wc,show:Zc,close:Xc,container:Qc},Jc=()=>{const s=U(),{isOpen:t,modalType:n,modalProps:r}=Se(We);if(!t||!n)return null;const o=()=>{s(ke())},a=n?no[n]:null;return a?e.jsx("div",{className:g(Ee.modal,{[Ee.show]:t}),onClick:o,children:e.jsxs("div",{className:Ee.container,onClick:c=>c.stopPropagation(),children:[e.jsx(Uc,{className:Ee.close,onClick:o}),e.jsx(a,{...r})]})}):null},Kc=s=>s.userProfile,Yc=()=>{const{isAuth:s}=Se(Kc),{logOut:t,isLoading:n}=Es();return n?e.jsx(Xt,{}):e.jsx(e.Fragment,{children:s?e.jsxs(vc,{logout:t,children:[e.jsx(sc,{}),e.jsx(Jc,{})]}):e.jsx(qc,{login:null})})};function Gc(s){return Ps({reducer:{userProfile:Rt.reducer,modal:kn},preloadedState:s})}const ei=Gc(),ti=s=>{const{children:t}=s;return e.jsx(Ls,{store:ei,children:t})};$s(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(ti,{children:e.jsx(As,{children:e.jsx(Yc,{})})})}));export{C as B,pe as C,F,Uc as X,se as a,p as l,me as u};
