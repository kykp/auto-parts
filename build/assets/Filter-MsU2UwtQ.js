import{j as t,c as x,b as g,u as k,d as E,r as S,m as f,l as h,F as m,B as j}from"./index-DMR50fL8.js";const V="_x_1ueo6_44",y={x:V,"theme-filled":"_theme-filled_1ueo6_59"},w=c=>{const{className:a,onClick:s,theme:n="main",style:l}=c;return t.jsx("button",{style:l,type:"button",onClick:s,className:x(y.x,{[y[`theme-${n}`]]:n},a),children:t.jsx(g,{width:20,height:20})})},F=c=>c.reduce((a,s)=>{if(s.elementType==="date")return s.fields.forEach(l=>a[l.name]=l.defaultValue),a;if(s.elementType==="time")return s.fields.forEach(l=>{var r;return a[l.name]=l.defaultValue?(r=l.defaultValue)==null?void 0:r.replace("-",":"):null}),a;const n=s.defaultValue;if(s.elementType==="select"){const l=s.options.find(r=>r.value===n);return a[s.name]=n?l:null,a}return s.elementType==="checkBox"||s.elementType==="switcher"?(a[s.name]=!!n,a):(a[s.name]=n||"",a)},{}),O=c=>Object.entries(c).reduce((a,[s,n])=>(a[s]=n||null,a),{}),B="_FilterOverlay_1t2sa_44",I="_Filter_1t2sa_44",D="_header_1t2sa_69",P="_title_1t2sa_75",X="_body_1t2sa_80",$="_label_1t2sa_88",R="_buttons_1t2sa_92",H="_field_1t2sa_98",q="_container_1t2sa_105",i={FilterOverlay:B,Filter:I,header:D,title:P,body:X,label:$,buttons:R,field:H,container:q},G=c=>{const{isShowClose:a=!0,className:s,onClose:n,config:l=[]}=c,{control:r,handleSubmit:N,reset:b}=k({defaultValues:F(l)}),[z,_]=E(),v=e=>{const d=O(e),u=Object.entries(d).reduce((o,[C,p])=>(o[C]=typeof p=="object"&&p!==null?p.value:p,o),{});_(o=>({...o,page:1,...u})),n(),b()},T=async()=>{_(()=>({page:1})),n()};return S.useEffect(()=>{b(F(l))},[l]),t.jsxs(t.Fragment,{children:[t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},className:x(i.FilterOverlay),onClick:n}),t.jsxs(f.form,{animate:{transform:"translateX(-320px)"},exit:{transform:"translateX(0)"},transition:{duration:.3},className:x(i.Filter,s),onSubmit:N(v),children:[t.jsxs("div",{className:i.header,onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{className:i.title,children:h.title.filter}),a&&t.jsx(w,{onClick:n})]}),t.jsx("div",{className:i.body,children:l.map((e,d)=>t.jsxs("div",{children:[e.groupName&&t.jsx("div",{className:i.label,children:e.groupName}),e.elementType==="input"&&t.jsx(m.Input,{control:r,name:e.name,placeholder:e.placeholder,label:e.label}),e.elementType==="checkBox"&&t.jsx(m.Checkbox,{control:r,name:e.name,label:e.label}),e.elementType==="select"&&t.jsx(m.Select,{control:r,name:e.name,options:e.options,placeholder:e.placeholder,label:e.label}),e.elementType==="switcher"&&t.jsx(m.Switch,{control:r,name:e.name,label:e.label}),e.elementType==="date"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((u,o)=>t.jsx(m.Input,{control:r,type:"date",name:u.name},o))},d)]}),e.elementType==="time"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((u,o)=>t.jsx(m.Input,{control:r,type:"time",name:u.name},o))},d)]})]},d))}),t.jsxs("div",{className:i.buttons,children:[t.jsx(j,{type:"submit",children:h.btn.acceptFilters}),t.jsx(j,{type:"button",theme:"white",onClick:T,children:h.btn.clearFilters})]})]})]})};export{G as default};
