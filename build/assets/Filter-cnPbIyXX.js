import{D as q,r as g,j as t,n as f,e as j}from"./vendor-D5vbP1IM.js";import{u as k,l as h,X as C,F as d,B as y}from"./index-25Mq9Srb.js";const _=c=>c.reduce((n,s)=>{if(s.elementType==="date")return s.fields.forEach(l=>n[l.name]=l.defaultValue),n;if(s.elementType==="time")return s.fields.forEach(l=>{var r;return n[l.name]=l.defaultValue?(r=l.defaultValue)==null?void 0:r.replace("-",":"):null}),n;const a=s.defaultValue;if(s.elementType==="select"){const l=s.options.find(r=>r.value===a);return n[s.name]=a?l:null,n}return s.elementType==="checkBox"||s.elementType==="switcher"?(n[s.name]=!!a,n):(n[s.name]=a||"",n)},{}),E=c=>Object.entries(c).reduce((n,[s,a])=>(n[s]=a||null,n),{}),S="_FilterOverlay_sqddp_45",V="_Filter_sqddp_45",O="_header_sqddp_70",w="_title_sqddp_76",B="_body_sqddp_81",D="_label_sqddp_89",X="_buttons_sqddp_93",I="_field_sqddp_99",P="_container_sqddp_106",i={FilterOverlay:S,Filter:V,header:O,title:w,body:B,label:D,buttons:X,field:I,container:P},z=c=>{const{isShowClose:n=!0,className:s,onClose:a,config:l=[]}=c,{control:r,handleSubmit:F,reset:b}=q({defaultValues:_(l)}),[R,x]=k(),N=e=>{const m=E(e),p=Object.entries(m).reduce((o,[T,u])=>(o[T]=typeof u=="object"&&u!==null?u.value:u,o),{});x(o=>({...o,page:1,...p})),a(),b()},v=async()=>{x(()=>({page:1})),a()};return g.useEffect(()=>{b(_(l))},[l]),t.jsxs(t.Fragment,{children:[t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},className:j(i.FilterOverlay),onClick:a}),t.jsxs(f.form,{animate:{transform:"translateX(-320px)"},exit:{transform:"translateX(0)"},transition:{duration:.3},className:j(i.Filter,s),onSubmit:F(N),children:[t.jsxs("div",{className:i.header,onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{className:i.title,children:h.title.filter}),n&&t.jsx(C,{onClick:a})]}),t.jsx("div",{className:i.body,children:l.map((e,m)=>t.jsxs("div",{children:[e.groupName&&t.jsx("div",{className:i.label,children:e.groupName}),e.elementType==="input"&&t.jsx(d.Input,{control:r,name:e.name,placeholder:e.placeholder,label:e.label}),e.elementType==="checkBox"&&t.jsx(d.Checkbox,{control:r,name:e.name,label:e.label}),e.elementType==="select"&&t.jsx(d.Select,{control:r,name:e.name,options:e.options,placeholder:e.placeholder,label:e.label}),e.elementType==="switcher"&&t.jsx(d.Switch,{control:r,name:e.name,label:e.label}),e.elementType==="date"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((p,o)=>t.jsx(d.Input,{control:r,type:"date",name:p.name},o))},m)]}),e.elementType==="time"&&t.jsxs("div",{className:i.field,children:[t.jsx("span",{children:e.label}),t.jsx("div",{className:i.container,children:e.fields.map((p,o)=>t.jsx(d.Input,{control:r,type:"time",name:p.name},o))},m)]})]},m))}),t.jsxs("div",{className:i.buttons,children:[t.jsx(y,{type:"submit",children:h.btn.acceptFilters}),t.jsx(y,{type:"button",theme:"white",onClick:v,children:h.btn.clearFilters})]})]})]})};export{z as default};
